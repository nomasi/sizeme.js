{"version":3,"sources":["sizeme-ui.js"],"names":["window","SizeMeI18N","defaultLang","defLang","languages","this","add","lang","langObj","get","SizeMe","I18N","undefined","FIT_VERDICT","not_fitted","too_small","slim","regular","loose","very_loose","huge","too_big","FIT_VERDICT_LONG","MEASUREMENT","chest","waist","sleeve","sleeve_top_width","sleeve_top_opening","wrist_width","underbust","neck_opening_width","shoulder_width","front_height","pant_waist","hips","inseam","outseam","thigh_width","knee_width","calf_width","pant_sleeve_width","shoe_inside_length","shoe_inside_width","hat_width","hood_height","hem","sleeve_opening","COMMON","shopping_for","selected_size","is","add_to_profile","size","fetching_profiles","close_text","go_to","my_profiles","and_create_one","MESSAGE","add_profiles","missing_measurements","no_measurements","add_this_measurement","no_profiles","no_top_button","DETAILED","window_title","button_text","table_title","SIZE_GUIDE","measurement_disclaimer","measurement_disclaimer_collar","measurement_disclaimer_inside","advertisement","FIT_INFO","when_pinched","stretched_little","stretched_somewhat","stretched_much","stretched_max","the_item","the_measurement","no_overlap","is_smaller","overlaps_you","arm_sleeve_straight","sm_considers_fit","overall_fit","overall_fit_for_size","SPLASH","detailed_text","btn_sign_up_title","btn_sign_up_label","btn_log_in_title","btn_log_in_label","btn_no_thanks_title","btn_no_thanks_label","product_page_splashes","product_page_splash_title","UI","$","sizemeProduct","tokenHelper","createCookie","name","value","days","expires","date","Date","setTime","getTime","toUTCString","document","cookie","readCookie","c","ca","split","i","length","trim","eraseCookie","sizeText","txt","retStr","getFit","fitValue","importance","returnFit","singleFit","ranges","FIT_RANGES_LESS_IMPORTANCE","FIT_RANGES","hasOwnProperty","getItemTypeArr","itemTypeStr","item","itemType","toString","itemTypeArr","separator","indexOf","itemTypeSplitted","isInside","loadArrows","isSizeGuide","$i","$x","arrowColor","arrowColorGreen","arcStyle","arrowColorBlack","measurement_arrows","mirror","coords","X","Y","style","lift","color","cp1X","cp1Y","cp2X","cp2Y","midCircle","item_drawing","accents","i18n","push","type","noMirror","R","FIT_ORDER","splice","Math","round","$base_y","getSliderHtml","sliderHtml","basePosX","cellTitle","sizeme_local_options","fitAreaSlider","perc_width","sliderScale","label","sliderPos","offset","returnPos","min","sliderPosXMax","sliderPosXMin","max","killExtraSlider","remove","drawExtraSlider","hide","appendTo","fadeIn","fadeLength","newWidth","width","writeSliderFlag","fitLabel","thisSize","thisKey","sliderFlagHtml","append","hover","toggleClass","click","uiOptions","sizeSelectionElement","val","invokeElement","trigger","invokeEvent","moveSlider","shouldAnimate","stop","animate","moveAreaSlider","matchMap","endX","startX","newMarginLeft","smallestFit","biggestFit","measurement","isImportant","componentFit","marginLeft","css","goWriteMessages","missingMeasurements","accuracy","totalFit","$message","$message_type","$message_link","empty","selectedProfile","linkToSelectedProfile","accuracyThreshold","overlap","addClass","text","attr","selectToButtons","$selectElement","sizeCount","find","$content","createElement","each","thisVal","id","thisId","thisLabel","thisClass","$div","on","removeClass","after","getMaxY","data","getMaxX","getMinX","getMinY","getArced","p1","p2","dX","arcRadius","liftCoords","nX","nY","dY","angleA","atan2","sin","arrowLift","cos","getMidPoints","mid","plotItem","isArrow","scale","offsetX","offsetY","highlighted","pX","coord","pY","j","lcp","beginPath","lineWidth","arrowLineWidth","moveTo","bezierCurveTo","lineTo","stroke","arc","arrowEndRadius","PI","fill","rad","arrowNumberRadius","fillStyle","font","arrowNumberFont","textAlign","textBaseline","arrowNumberHighlightFont","fillText","num","fillColor","strokeStyle","drawColor","itemLineWidth","lineCap","lineJoin","miterLimit","realCanvasWidth","writeItemCanvas","canvas_id","highlight","getElementById","getContext","realCanvasHeight","canvasWidth","padding","canvasHeight","maxX","maxY","inputKey","measurements","draw","Object","keys","initOpentip","Opentip","lastZIndex","styles","myDefaultStyle","group","defaultStyle","hasNeckOpening","retval","noThanks","noProductSplash","writeDetailedWindow","itemName","txts","linkTarget","appendContentTo","$dialog","dialog","position","my","at","of","autoOpen","dialogClass","minHeight","minWidth","scaleH","scaleW","closeText","title","trackEvent","$slider_clone","clone","end","$matchMap","$txt","sizeme_options","service_status","contextAddress","clearAuthToken","colorCell","$cell","arrow","arrowColorInfo","selectedFit","getMissingMeasurement","isPinched","PINCHED_FITS","isLongFit","LONG_FITS","isPinchedTxt","getStretchedTxt","stretch_value","updateSliderFlags","fitData","key","result","fitRangeLabel","checkAndCloneSizeSelect","$clone","addBack","html","buttonize","writeSliderFlags","cloneVal","original_val","updateDetailedTable","$row","$tip","$table","$tip_txts","$tip_classes","writeOverlaps","drawReason","matchItem","$meas_top","toLowerCase","toFixed","$sleeve_txt","$sleeve_height","percentage","$front_height_txt","$front_height_height","componentStretch","replace","$fitVerdict","className","missing","$class","$j","$first","sizeKeys","myVal","myText","sizeLabel","updateDetailedSliderTip","thisFit","$trigger","$tip_txt","updateSlider","$thisEl","eq","thisData","body","writeMessages","getStandardHeader","headerHtml","getSplashDetailed","getProductSplash","splashHtml","setProfileLink","doProfileChange","newValue","matchFn","cookieLifetime","recommendedId","options",1,940,1000,1055,1110,1165,1225,"OPTIMAL_FIT","recommendedLabel","matchResponseHandler","responseMap","smallestOffset","classKey","fitOffset","abs","show","firstRecommendation","profileListHandler","profileList","cookieProfile","$new","select","profileName","change","login","logoutFn","logout","loginFn","sizeVal","splashContent","loginFrame","appendSplashTo","slideUp","init","sizemeLang","sizeSelectionContainer","Error","addToCartEvent","addToCartElement","isLoggedIn","matchErrorHandler","console","error","sizemeInit","sizeme","TokenHelper","dataStorage","DataStorage","_tstorage","x","setItem","removeItem","storage","e","prototype","withStorage","callback","getAuthToken","deferred","Deferred","storedToken","storedTokenObj","getItem","JSON","parse","token","resolve","reject","state","authTokenObj","stringify","promise","initSizeme","then","initProduct","productPromise","sizeme_product","SKU","getProductInfo","dbItem","productItem","extend","sku","values","theProduct","xhr","status","setup","product","sizemeUI","checkMaxMeasurement","maxVal","_","doMatch","matchHandler","convertedResponseMap","join","match","FitRequest","loggedInCb","loggedOutCb","fetchProfilesForAccount","systemsGo","setupNoProduct","sizemeDef","always","when","done","fail"],"mappings":"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","file":"sizeme-ui.min.js","sourcesContent":["/* globals SizeMe: false */\r\n(function(window) {\r\n    \"use strict\";\r\n\r\n    var SizeMeI18N = function (defaultLang) {\r\n\t\t// langs defined by ISO 639-1 Language Code (fallback to english)\r\n        var defLang = defaultLang || \"en\";\r\n\r\n        var languages = {};\r\n        languages[defLang] = {};\r\n\r\n        this.add = function (lang, langObj) {\r\n            languages[lang] = langObj;\r\n        };\r\n\r\n        this.get = function (lang) {\r\n            return languages[lang] || languages[defLang];\r\n        };\r\n    };\r\n\r\n    SizeMe.I18N = new SizeMeI18N(\"en\");\r\n\r\n})(window);\n/* globals SizeMe: false */\r\n(function (undefined) {\r\n    \"use strict\";\r\n\r\n    SizeMe.I18N.add(\"en\",\r\n        {\r\n            FIT_VERDICT: {\r\n                not_fitted: \"Too small\",\r\n                too_small: \"Too small\",\r\n                slim: \"Slim\",\r\n                regular: \"Regular\",\r\n                loose: \"Loose\",\r\n                very_loose: \"Very loose\",\r\n                huge: \"Huge\",\r\n                too_big: \"Too big\"\r\n            },\r\n            FIT_VERDICT_LONG: {\r\n                not_fitted: \"Too short\",\r\n                too_small: \"Too short\",\r\n                slim: \"Short\",\r\n                regular: \"Regular\",\r\n                loose: \"Long\",\r\n                very_loose: \"Very long\",\r\n                huge: \"Huge\",\r\n                too_big: \"Too long\"\r\n            },\r\n            MEASUREMENT: {\r\n                chest: \"Chest\",\r\n                waist: \"Waist\",\r\n                sleeve: \"Sleeve\",\r\n                sleeve_top_width: \"Sleeve top\",\r\n                sleeve_top_opening: \"Sleeve top opening\",\r\n                wrist_width: \"Wrist\",\r\n                underbust: \"Underbust\",\r\n                neck_opening_width: \"Collar\",\r\n                shoulder_width: \"Shoulder\",\r\n                front_height: \"Front height\",\r\n                pant_waist: \"Pant waist\",\r\n                hips: \"Hips\",\r\n                inseam: \"Inseam\",\r\n                outseam: \"Outseam\",\r\n                thigh_width: \"Thigh\",\r\n                knee_width: \"Knee\",\r\n                calf_width: \"Calf\",\r\n                pant_sleeve_width: \"Leg opening\",\r\n                shoe_inside_length: \"Shoe length\",\r\n                shoe_inside_width: \"Shoe width\",\r\n                hat_width: \"Hat circumference\",\r\n                hood_height: \"Hood height\",\r\n                hem: \"Hem\",\r\n                sleeve_opening: \"Sleeve opening\"\r\n            },\r\n            COMMON: {\r\n                shopping_for: \"Shopping for\",\r\n                selected_size: \"Selected size\",\r\n                is: \"is\",\t// verb\r\n                add_to_profile: \"Add to profile\",\r\n                size: \"Size\",\r\n                fetching_profiles: \"Fetching profiles...\",\r\n                close_text: \"Close\",\r\n                go_to: \"Go to\",\r\n                my_profiles: \"My Profiles\",\r\n                and_create_one: \"and create one.\"\t// as in: go to my profiles and create one\r\n            },\r\n            MESSAGE: {\r\n                add_profiles: \"Add profiles to your account for a size recommendation.\",\r\n                missing_measurements: \"Add more measurements to your profile for increased accuracy\",\r\n                no_measurements: \"Add measurements to your profile for a size recommendation.\",\r\n                add_this_measurement: \"Add this measurement to your profile to include it in the fit calculation.\",\r\n                no_profiles: \"You have no profiles on your account.\",\r\n                no_top_button: \"The shirt's top button for this size won't close.\"\r\n            },\r\n            DETAILED: {\r\n                window_title: \"Detailed View for\",\r\n                button_text: \"Detailed view of fit\",\r\n                table_title: \"Detailed fit - overlaps\"\r\n            },\r\n            SIZE_GUIDE: {\r\n                window_title: \"Size Guide for\",\r\n                button_text: \"Size guide\",\r\n                table_title: \"Actual item measurements\",\r\n                measurement_disclaimer: \"These measurements are measured <u>flat across the outside of the item</u>.\",\r\n                measurement_disclaimer_collar: \"Except for the collar measurement, which is measured around the inside of the collar.\",\r\n                measurement_disclaimer_inside: \"These measurements are measured <u>inside the item</u>.\",\r\n                advertisement: \"This size guide is brought to you by\"\r\n            },\r\n            FIT_INFO: {\r\n                when_pinched: \" when pinched\",\r\n                stretched_little: \"The item is stretched a little.\",\r\n                stretched_somewhat: \"The item is stretched.\",\r\n                stretched_much: \"The item is stretched a lot.\",\r\n                stretched_max: \"The item is stretched to the max.\",\r\n                the_item: \"The item's\",\r\n                the_measurement: \"measurement\",\r\n                no_overlap: \"is directly on you with no overlap.\",\r\n                is_smaller: \"is <u>smaller</u> than your matching measurement by\",\r\n                overlaps_you: \"overlaps you by\",\r\n                arm_sleeve_straight: \"when your arm and the item's sleeve are <u>completely straight</u>\",\r\n                sm_considers_fit: \"SizeMe considers this particular fit\",\r\n                overall_fit: \"Overall fit\",\r\n                overall_fit_for_size: \"The overall fit for <b>size\"\r\n            },\r\n            SPLASH: {\r\n                detailed_text: \"Take a few <b>measurements of yourself</b> and get personalized info on how this item would <b>fit you</b>.<br />Create a free <b>SizeMe</b> profile and stop guessing!\",\r\n                btn_sign_up_title: \"Sign up\",\r\n                btn_sign_up_label: \"Yes, I'd like to create a free account\",\r\n                btn_log_in_title: \"Log in\",\r\n                btn_log_in_label: \"I already have an account\",\r\n                btn_no_thanks_title: \"No thanks\",\r\n                btn_no_thanks_label: \"Maybe later\",\r\n                product_page_splashes: [\"Unsure about the right size? Try\"],\r\n                product_page_splash_title: \"SizeMe is a free service to help you know how this item will fit _you_\"\r\n            }\r\n        }\r\n    );\r\n\r\n})();\n/* globals SizeMe: false */\r\n(function (undefined) {\r\n    \"use strict\";\r\n\r\n    SizeMe.I18N.add(\"fi\",\r\n        {\r\n            FIT_VERDICT: {\r\n                not_fitted: \"Pieni\",\r\n                too_small: \"Pieni\",\r\n                slim: \"Kapea\",\r\n                regular: \"Normaali\",\r\n                loose: \"Väljä\",\r\n                very_loose: \"Erittäin väljä\",\r\n                huge: \"Valtava\",\r\n                too_big: \"Liian iso\"\r\n            },\r\n            FIT_VERDICT_LONG: {\r\n                not_fitted: \"Liian lyhyt\",\r\n                too_small: \"Liian lyhyt\",\r\n                slim: \"Lyhyehkö\",\r\n                regular: \"Normaali\",\r\n                loose: \"Pitkähkö\",\r\n                very_loose: \"Pitkä\",\r\n                huge: \"Valtava\",\r\n                too_big: \"Liian pitkä\"\r\n            },\r\n            MEASUREMENT: {\r\n                chest: \"Rinta\",\r\n                waist: \"Vyötärö\",\r\n                sleeve: \"Hiha\",\r\n                sleeve_top_width: \"Hihan yläosa\",\r\n                sleeve_top_opening: \"Hihan leveys\",\r\n                wrist_width: \"Ranne\",\r\n                underbust: \"Rinnan alta\",\r\n                neck_opening_width: \"Kaulus\",\r\n                shoulder_width: \"Hartia\",\r\n                front_height: \"Etupituus\",\r\n                pant_waist: \"Housun vyötärö\",\r\n                hips: \"Lantio\",\r\n                inseam: \"Sisäsauma\",\r\n                outseam: \"Ulkosauma\",\r\n                thigh_width: \"Reisi\",\r\n                knee_width: \"Polvi\",\r\n                calf_width: \"Pohje\",\r\n                pant_sleeve_width: \"Lahje\",\r\n                shoe_inside_length: \"Sisäpituus\",\r\n                shoe_inside_width: \"Sisäleveys\",\r\n                hat_width: \"Ympärysmitta\",\r\n                hood_height: \"Hupun korkeus\",\r\n                hem: \"Helma\",\r\n                sleeve_opening: \"Hihan suu\"\r\n            },\r\n            COMMON: {\r\n                shopping_for: \"Aktiivinen profiili\",\r\n                selected_size: \"Valittu koko\",\r\n                is: \"on\",\t// verb\r\n                add_to_profile: \"Lisää profiiliin\",\r\n                size: \"Koko\",\r\n                fetching_profiles: \"Haetaan profiileja...\",\r\n                close_text: \"Sulje\",\r\n                go_to: \"Mene\",\r\n                my_profiles: \"Profiili-sivulleni\",\r\n                and_create_one: \"ja luo profiili.\"\t// as in: go to my profiles and create one\r\n            },\r\n            MESSAGE: {\r\n                add_profiles: \"Lisää mittaprofiili kokosuositusta varten.\",\r\n                missing_measurements: \"Lisää mittoja profiiliisi tarkempaa tulosta varten\",\r\n                no_measurements: \"Lisää mittoja profiiliisi kokosuositusta varten.\",\r\n                add_this_measurement: \"Lisää tämä mitta profiilisi tarkempaa tulosta varten.\",\r\n                no_profiles: \"Tililläsi ei ole yhtään mittaprofiilia.\",\r\n                no_top_button: \"Paidan ylin nappi ei tässä koossa mene kiinni.\"\r\n            },\r\n            DETAILED: {\r\n                window_title: \"Sopivuustiedot tuotteelle\",\r\n                button_text: \"Sopivuustiedot\",\r\n                table_title: \"Sopivuustiedot\"\r\n            },\r\n            SIZE_GUIDE: {\r\n                window_title: \"Kokotaulukko tuotteelle\",\r\n                button_text: \"Kokotaulukko\",\r\n                table_title: \"Tuotteen mitat\",\r\n                measurement_disclaimer: \"Nämä mitat on otettu <u>tuotteen päältä tasaisella alustalla</u>.\",\r\n                measurement_disclaimer_collar: \"Paitsi kaulus, joka on ympärysmitta kauluksen sisäpuolelta.\",\r\n                measurement_disclaimer_inside: \"Nämä mitat on otettu <u>tuotteen sisältä</u>.\",\r\n                advertisement: \"Tämän kokotaulukon toimittaa\"\r\n            },\r\n            FIT_INFO: {\r\n                when_pinched: \" nipistettynä sormien väliin\",\r\n                stretched_little: \"Tuote venyy vähän.\",\r\n                stretched_somewhat: \"Tuote venyy.\",\r\n                stretched_much: \"Tuote venyy kunnolla.\",\r\n                stretched_max: \"Tuote venyy huolella.\",\r\n                the_item: \"Tuotteen\",\r\n                the_measurement: \"-mitta\",\r\n                no_overlap: \"on suoraan sinua vasten.\",\r\n                is_smaller: \"on sinun omaa mittaasi <u>pienempi</u>\",\r\n                overlaps_you: \"ylittää mittasi\",\r\n                arm_sleeve_straight: \"kun kätesi ja tuotteen hiha on <u>suoraan alaspäin</u>\",\r\n                sm_considers_fit: \"SizeMe:n mielestä tämä sopivuus on\",\r\n                overall_fit: \"Sopivuus\",\r\n                overall_fit_for_size: \"Sopivuus <b>koolle\"\r\n            },\r\n            SPLASH: {\r\n                detailed_text: \"Ota <b>muutama mitta</b> itsestäsi ja näe miten tämä tuote <b>sopisi sinulle</b>.<br />Luo oma <b>SizeMe</b>-tunnus ja lopeta arvailu!\",\r\n                btn_sign_up_title: \"Liityn mukaan\",\r\n                btn_sign_up_label: \"Jep, haluan luoda oman tunnuksen\",\r\n                btn_log_in_title: \"Kirjaudu\",\r\n                btn_log_in_label: \"Minulla on jo oma tunnus\",\r\n                btn_no_thanks_title: \"Ei kiitos\",\r\n                btn_no_thanks_label: \"Ehkä myöhemmin\",\r\n                product_page_splashes: [\"Haluatko apua oikean koon valitsemisessa? Kokeile\"],\r\n                product_page_splash_title: \"SizeMe-palvelu kertoo miten tämä tuote sopii juuri _sinulle_\"\r\n            }\r\n        }\r\n    );\r\n\r\n})();\n/* globals SizeMe: false */\r\n(function (undefined) {\r\n    \"use strict\";\r\n\r\n    SizeMe.I18N.add(\"sv\",\r\n        {\r\n            FIT_VERDICT: {\r\n                not_fitted: \"För liten\",\r\n                too_small: \"För liten\",\r\n                slim: \"Slim\",\r\n                regular: \"Normal\",\r\n                loose: \"Lös\",\r\n                very_loose: \"Mycket lös\",\r\n                huge: \"3XL\",\r\n                too_big: \"För stor\"\r\n            },\r\n            FIT_VERDICT_LONG: {\r\n                not_fitted: \"För kort\",\r\n                too_small: \"För kort\",\r\n                slim: \"Kort\",\r\n                regular: \"Normal\",\r\n                loose: \"Lång\",\r\n                very_loose: \"Mycket lång\",\r\n                huge: \"3XL\",\r\n                too_big: \"För lång\"\r\n            },\r\n            MEASUREMENT: {\r\n                chest: \"Bröst\",\r\n                waist: \"Midja\",\r\n                sleeve: \"Ärm\",\r\n                sleeve_top_width: \"Ärmens övre del\",\r\n                sleeve_top_opening: \"Ärmens övre öppning\",\r\n                wrist_width: \"Handled\",\r\n                underbust: \"Under bröstet\",\r\n                neck_opening_width: \"Krage\",\r\n                shoulder_width: \"Skuldra\",\r\n                front_height: \"Främre höjd\",\r\n                pant_waist: \"Byxans midja\",\r\n                hips: \"Höfter\",\r\n                inseam: \"Innersöm\",\r\n                outseam: \"Yttersömm\",\r\n                thigh_width: \"Lår\",\r\n                knee_width: \"Knä\",\r\n                calf_width: \"Vad\",\r\n                pant_sleeve_width: \"Ben öppning\",\r\n                shoe_inside_length: \"Sko längd\",\r\n                shoe_inside_width: \"Sko bredd\",\r\n                hat_width: \"Hatt omkrets\",\r\n                hood_height: \"Huvans höjd\",\r\n                hem: \"Fåll\",\r\n                sleeve_opening: \"Ärm öppning\"\r\n            },\r\n            COMMON: {\r\n                shopping_for: \"Shoppa för\",\r\n                selected_size: \"Vald storlek\",\r\n                is: \"är\",     // verb\r\n                add_to_profile: \"Lägg till profilen\",\r\n                size: \"Storlek\",\r\n                fetching_profiles: \"Hämta profiler...\",\r\n                close_text: \"Stäng\",\r\n                go_to: \"Gå till\",\r\n                my_profiles: \"Mina Profiler\",\r\n                and_create_one: \"och skapa en.\"\t\t\t\t// as in: go to my profiles and create one\r\n            },\r\n            MESSAGE: {\r\n                add_profiles: \"Lägg profiler till ditt konto för storleks rekommendation.\",\r\n                missing_measurements: \"Lägg flera mått till din profil för ökad noggrannhet\",\r\n                no_measurements: \"Lägg mått till din profil för en storleks rekommendation.\",\r\n                add_this_measurement: \"Lägg detta mått till din profil för att inkludera det i lämplighets kalkylen.\",\r\n                no_profiles: \"Du har ingen profil på ditt konto.\",\r\n                no_top_button: \"Översta knappen skjorta kan inte stängas i denna storlek.\"\r\n            },\r\n            DETAILED: {\r\n                window_title: \"Detaljerad Bild för\",\r\n                button_text: \"Detaljerad Bild\",\r\n                table_title: \"Detaljerade lämpliga delar\"\r\n            },\r\n            SIZE_GUIDE: {\r\n                window_title: \"Storleks Guide för\",\r\n                button_text: \"Storleks guide\",\r\n                table_title: \"Aktuella artikel mått\",\r\n                measurement_disclaimer: \"Dessa mått är uppmätta <u>på jämnt underlag på artikelns utsida</u>.\",\r\n                measurement_disclaimer_collar: \"Med undantag av kragmåttet, som är uppmätt på kragens insida.\",\r\n                measurement_disclaimer_inside: \"Dessa mått är uppmätta <u>på insidan av artikeln</u>.\",\r\n                advertisement: \"Denna storleksguide har gjorts för dig av\"\r\n            },\r\n            FIT_INFO: {\r\n                when_pinched: \" när utdragen\",\r\n                stretched_little: \"Artikeln är töjd litet.\",\r\n                stretched_somewhat: \"Artikeln är töjd.\",\r\n                stretched_much: \"Artikeln är töjd mycket.\",\r\n                stretched_max: \"Artikeln är töjd till maximum.\",\r\n                the_item: \"Artikelns\",\r\n                the_measurement: \"Mått\",\r\n                no_overlap: \"är direkt mot dig.\",\r\n                is_smaller: \"är <u>mindre</u> än ditt passande mått\",\r\n                overlaps_you: \"är större än dig\",\r\n                arm_sleeve_straight: \"när din arm och artikelns ärm är <u<helt raka</u>\",\r\n                sm_considers_fit: \"SizeMe anser det speciellt lagom\",\r\n                overall_fit: \"Överallt lagom\",\r\n                overall_fit_for_size: \"Överallt lagom av <b>storlek\",\r\n            },\r\n            SPLASH: {\r\n                detailed_text: \"Tag några <b>mått av dig själv</b> och få personlig info hur denna artikel skulle <b>passa dig</b>.<br />Gör en gratis <b>SizeMe</b> profil och sluta gissa!\",\r\n                btn_sign_up_title: \"Signera\",\r\n                btn_sign_up_label: \"Ja, jag vill skapa ett gratis konto\",\r\n                btn_log_in_title: \"Logga in\",\r\n                btn_log_in_label: \"Jag har redan ett konto\",\r\n                btn_no_thanks_title: \"Nej tack\",\r\n                btn_no_thanks_label: \"Kanske senare\",\r\n                product_page_splashes: [\"Osäker om den rätta storleken? Pröva\"],\r\n                product_page_splash_title: \"SizeMe är en gratis service för att hjälpa dig hur denna artikel passar dig\"\r\n            }\r\n        }\r\n    );\r\n\r\n})();\n// SizeMe UI JS v1.0\r\n// based on SizeMe Item Types 2015-10-01\r\n// (c) SizeMe Inc.\r\n// www.sizeme.com\r\n// License undecided\r\n/* jshint browser:true, jquery:true */\r\n/* globals sizeme_options: false, Opentip: false, SizeMe: false */\r\n\r\n(function (window, undefined) {\r\n    \"use strict\";\r\n    SizeMe.UI = function ($, sizemeProduct, tokenHelper) {\r\n\r\n        var i18n = {};\r\n        var uiOptions = SizeMe.UI.options;\r\n\r\n        var FIT_RANGES = {\r\n            1: {label: \"too_small\", arrowColor: \"#999999\"},\r\n            940: {label: \"too_small\", arrowColor: \"#BB5555\"},\r\n            1000: {label: \"slim\", arrowColor: \"#457A4C\"},\r\n            1055: {label: \"regular\", arrowColor: \"#42AE49\"},\r\n            1110: {label: \"loose\", arrowColor: \"#87B98E\"},\r\n            1165: {label: \"too_big\", arrowColor: \"#BB5555\"},\r\n            1225: {label: \"too_big\", arrowColor: \"#BB5555\"}\r\n        };\r\n\r\n        var FIT_RANGES_LESS_IMPORTANCE = {\r\n            1: {label: \"too_small\", arrowColor: \"#999999\"},\r\n            940: {label: \"too_small\", arrowColor: \"#BB5555\"},\r\n            1000: {label: \"slim\", arrowColor: \"#457A4C\"},\r\n            1055: {label: \"regular\", arrowColor: \"#42AE49\"},\r\n            1110: {label: \"loose\", arrowColor: \"#87B98E\"}\r\n        };\r\n\r\n        var sliderPosXMin = 940;\r\n        var sliderPosXMax = 1225;\r\n        var sliderScale = 100 / (sliderPosXMax - sliderPosXMin);\r\n\r\n        var FIT_ORDER = [\r\n            \"chest\",\r\n            \"waist\",\r\n            \"underbust\",\r\n            \"pant_waist\",\r\n            \"hips\",\r\n            \"inseam\",\r\n            \"outseam\",\r\n            \"thigh_width\",\r\n            \"knee_width\",\r\n            \"calf_width\",\r\n            \"pant_sleeve_width\",\r\n            \"neck_opening_width\",\r\n            \"shoulder_width\",\r\n            \"sleeve_top_width\",\r\n            \"sleeve_top_opening\",\r\n            \"sleeve\",\r\n            \"wrist_width\",\r\n            \"front_height\",\r\n            \"shoe_inside_length\",\r\n            \"shoe_inside_width\",\r\n            \"hat_width\",\r\n            \"hood_height\"\r\n        ];\r\n\r\n        var PINCHED_FITS = [\r\n            \"chest\",\r\n            \"waist\",\r\n            \"underbust\",\r\n            \"pant_waist\",\r\n            \"hips\",\r\n            \"thigh_width\",\r\n            \"knee_width\",\r\n            \"calf_width\",\r\n            \"pant_sleeve_width\",\r\n            \"neck_opening_width\",\r\n            \"sleeve_top_width\",\r\n            \"sleeve_top_opening\",\r\n            \"wrist_width\",\r\n            \"hat_width\"\r\n        ];\r\n\r\n        var LONG_FITS = [\r\n            \"inseam\",\r\n            \"outseam\",\r\n            \"sleeve\",\r\n            \"front_height\",\r\n            \"shoe_inside_length\"\r\n        ];\r\n\r\n        var OPTIMAL_FIT = 1070;\r\n\r\n        var realCanvasWidth = 350;\r\n        var realCanvasHeight = 480;\r\n        var padding = 0.07;\r\n\r\n        var drawColor = '#777777';\r\n        var fillColor = '#BBBBBB';\r\n        var arrowColor;\r\n        var arrowColorGreen = '#42AE49';\r\n        var arrowColorBlack = '#000000';\r\n        var arrowColorInfo = '#666666';\r\n\r\n        var itemLineWidth = 1;\r\n        var arrowLineWidth = 2;\r\n        var arrowEndRadius = 4;\r\n        var arrowNumberRadius = 10;\r\n        var arrowNumberFont = \"10px sans-serif\";\r\n        var arrowNumberHighlightFont = \"bold 14px sans-serif\";\r\n        var arrowLift = 30;\r\n        var arcRadius = 10;\r\n\r\n        var fadeLength = 400;\r\n\r\n        var item_drawing = {};\r\n        var measurement_arrows = {};\r\n\r\n        var fitData = {};\r\n\r\n        var recommendedId;\r\n        var recommendedLabel = \"none\";\r\n\r\n        var selectedProfile;\r\n        var linkToSelectedProfile;\r\n\r\n        var accuracyThreshold = 0.01;\r\n\r\n        var cookieLifetime = 90;\r\n\r\n        var itemName = \"\";\r\n\r\n        var sizeme_local_options = {\r\n            fitAreaSlider: true,\r\n            writeMessages: true,\r\n            writeOverlaps: true,\r\n\t\t\twriteSliderFlags: false\r\n        };\r\n\r\n        // Cookie functions\r\n        function createCookie(name, value, days) {\r\n            var expires;\r\n            if (days) {\r\n                var date = new Date();\r\n                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\r\n                expires = \"; expires=\" + date.toUTCString(); // toGMTString is deprecated and to-be removed\r\n            }\r\n            else {\r\n                expires = \"\";\r\n            }\r\n            document.cookie = name + \"=\" + value + expires + \"; path=/\";\r\n        }\r\n\r\n        function readCookie(name) {\r\n            var ca = document.cookie.split(';'), c;\r\n            for (var i = 0; i < ca.length; i++) {\r\n                c = ca[i].trim().split('=');\r\n                if (c[0] === name) {\r\n                    return c[1];\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n\r\n        function eraseCookie(name) {\r\n            createCookie(name, \"\", -1);\r\n        }\r\n\r\n        function sizeText(txt) {\r\n            var retStr = txt;\r\n            retStr = retStr.split(\" -\")[0];\r\n            retStr = retStr.split(\" +\")[0];\r\n            return retStr;\r\n        }\r\n\r\n        function getFit(fitValue, importance) {\r\n            var returnFit, singleFit;\r\n            var ranges;\r\n            ranges = FIT_RANGES_LESS_IMPORTANCE;\r\n            if (importance === 1) {\r\n                ranges = FIT_RANGES;\r\n            }\r\n            for (singleFit in ranges) {\r\n                if (ranges.hasOwnProperty(singleFit)) {\r\n                    if (fitValue < singleFit) {\r\n                        if (returnFit) {\r\n                            return returnFit;\r\n                        }\r\n                        return ranges[singleFit];\r\n                    }\r\n                    returnFit = ranges[singleFit];\r\n                }\r\n            }\r\n            return returnFit;\r\n        }\r\n\r\n        function getItemTypeArr() {\r\n            var itemTypeStr = sizemeProduct.item.itemType.toString();\r\n            var itemTypeArr = [0, 0, 0, 0, 0, 0, 0];\r\n            var separator = '';\r\n            if (itemTypeStr.indexOf('.') > -1) {\r\n                separator = '.';\r\n            }\r\n            var itemTypeSplitted = itemTypeStr.split(separator, 7);\r\n            for (var i = 0; i < itemTypeSplitted.length; i++) {\r\n                itemTypeArr[i] = +itemTypeSplitted[i];\r\n            }\r\n            return itemTypeArr;\r\n        }\r\n\r\n        function isInside() {\r\n            var itemTypeArr = getItemTypeArr();\r\n            return ( (itemTypeArr[0] === 3) || (itemTypeArr[0] === 4) );\r\n        }\r\n\r\n        function loadArrows(isSizeGuide) {\r\n            var $i, $x;\r\n            var itemTypeArr = getItemTypeArr();\r\n\r\n            // arrows first\r\n            arrowColor = arrowColorGreen;\r\n            var arcStyle = \"arc\";\r\n\r\n            if (isSizeGuide) {\r\n                arrowColor = arrowColorBlack;\r\n                arcStyle = \"line\"; // size guide shows flat measurements (except neck opening)\r\n            }\r\n\r\n            measurement_arrows.chest = {\r\n                mirror: false,\r\n                coords: [{X: -250, Y: 399}, {X: 250, Y: 399}],\r\n                style: arcStyle,\r\n                lift: false,\r\n                color: arrowColor\r\n            };\r\n            measurement_arrows.waist = {\r\n                mirror: false,\r\n                coords: [{X: -250, Y: 635}, {X: 250, Y: 635}],\r\n                style: arcStyle,\r\n                lift: false,\r\n                color: arrowColor\r\n            };\r\n            measurement_arrows.front_height = {\r\n                mirror: false,\r\n                coords: [{X: -174, Y: 0}, {X: -174, Y: 978}],\r\n                style: \"line\",\r\n                lift: false,\r\n                color: arrowColor\r\n            };\r\n            measurement_arrows.neck_opening_width = {\r\n                mirror: false,\r\n                coords: [{X: 0, Y: 47}, {X: 174, Y: 0, cp1X: 65, cp1Y: 45, cp2X: 140, cp2Y: 23}, {\r\n                    X: 0,\r\n                    Y: 100,\r\n                    cp1X: 150,\r\n                    cp1Y: 46,\r\n                    cp2X: 50,\r\n                    cp2Y: 92\r\n                },\r\n                    {X: -174, Y: 0, cp1X: -50, cp1Y: 92, cp2X: -150, cp2Y: 46}, {\r\n                        X: 0,\r\n                        Y: 47,\r\n                        cp1X: -140,\r\n                        cp1Y: 23,\r\n                        cp2X: -65,\r\n                        cp2Y: 45\r\n                    }],\r\n                style: \"line\",\r\n                lift: true,\r\n                color: arrowColor\r\n            };\r\n\r\n            measurement_arrows.hood_height = {\r\n                mirror: false,\r\n                coords: [{X: 195, Y: -5}, {X: 195, Y: -390}],\r\n                style: \"line\",\r\n                lift: false,\r\n                color: arrowColor\r\n            };\r\n            measurement_arrows.shoulder_width = {\r\n                mirror: false,\r\n                coords: [{X: -329, Y: 42}, {X: -164, Y: -7}],\r\n                style: \"line\",\r\n                lift: true,\r\n                color: arrowColor\r\n            };\r\n\r\n            measurement_arrows.pant_waist = {\r\n                mirror: false,\r\n                coords: [{X: -232, Y: 0}, {X: 222, Y: 0}],\r\n                style: arcStyle,\r\n                lift: true,\r\n                color: arrowColor\r\n            };\r\n            measurement_arrows.hips = {\r\n                mirror: false,\r\n                coords: [{X: -261, Y: 171}, {X: 263, Y: 171}],\r\n                style: arcStyle,\r\n                lift: false,\r\n                color: arrowColor\r\n            };\r\n            measurement_arrows.outseam = {\r\n                mirror: false,\r\n                coords: [{X: 222, Y: 0}, {X: 263, Y: 171}, {X: 302, Y: 1071}],\r\n                style: \"line\",\r\n                lift: true,\r\n                color: arrowColor\r\n            };\r\n            measurement_arrows.inseam = {\r\n                mirror: false,\r\n                coords: [{X: 5, Y: 297}, {X: 151, Y: 1084}],\r\n                style: \"line\",\r\n                lift: false,\r\n                color: arrowColor\r\n            };\r\n            measurement_arrows.thigh_width = {\r\n                mirror: false,\r\n                coords: [{X: -266, Y: 274}, {X: -17, Y: 297}],\r\n                style: arcStyle,\r\n                lift: false,\r\n                color: arrowColor\r\n            };\r\n            measurement_arrows.knee_width = {\r\n                mirror: false,\r\n                coords: [{X: -286, Y: 727}, {X: -93, Y: 744}],\r\n                style: arcStyle,\r\n                lift: false,\r\n                color: arrowColor\r\n            };\r\n            measurement_arrows.pant_sleeve_width = {\r\n                mirror: false,\r\n                coords: [{X: -301, Y: 1071}, {X: -152, Y: 1084}],\r\n                style: arcStyle,\r\n                lift: false,\r\n                color: arrowColor\r\n            };\r\n\r\n            measurement_arrows.shoe_inside_length = {\r\n                mirror: false,\r\n                coords: [{X: 169, Y: 984}, {X: 132, Y: 18}],\r\n                style: \"line\",\r\n                lift: false,\r\n                color: arrowColor\r\n            };\r\n\r\n            measurement_arrows.hat_width = {\r\n                mirror: false,\r\n                coords: [{X: 534, Y: 238},\r\n                    {X: 539, Y: 265, cp1X: 559, cp1Y: 236, cp2X: 567, cp2Y: 252},\r\n                    {X: 70, Y: 262, cp1X: 352, cp1Y: 353, cp2X: 223, cp2Y: 351},\r\n                    {X: 77, Y: 242, cp1X: 38, cp1Y: 241, cp2X: 60, cp2Y: 234}],\r\n                midCircle: {X: 300, Y: 325},\r\n                style: \"line\",\r\n                lift: false,\r\n                color: arrowColor\r\n            };\r\n\r\n            item_drawing.mirror = true;\r\n            item_drawing.coords = [];\r\n            item_drawing.accents = [];\r\n            // load item drawing\r\n            switch (itemTypeArr[0]) {\r\n\r\n                case 1:\t// shirts/coats\r\n                    i18n.MEASUREMENT.hips = i18n.MEASUREMENT.hem;\r\n                    i18n.MEASUREMENT.pant_waist = i18n.MEASUREMENT.hem;\r\n\r\n                    switch (itemTypeArr[1]) { // collar\r\n                        case 2:\t// tight (turnover)\r\n                            item_drawing.coords.push({X: 0, Y: -60}, {\r\n                                X: 119,\r\n                                Y: -48,\r\n                                cp1X: 68,\r\n                                cp1Y: -60,\r\n                                cp2X: 106,\r\n                                cp2Y: -57\r\n                            }, {X: 128, Y: 0});\r\n                            item_drawing.accents.push({\r\n                                type: \"area\", coords: [{X: 0, Y: -47},\r\n                                    {X: 100, Y: -35, cp1X: 64, cp1Y: -48, cp2X: 105, cp2Y: -47},\r\n                                    {X: -5, Y: 59, cp1X: 66, cp1Y: 8, cp2X: 6, cp2Y: 40},\r\n                                    {X: -104, Y: -34, cp1X: -25, cp1Y: 32, cp2X: -93, cp2Y: -12},\r\n                                    {X: 0, Y: -46, cp1X: -117, cp1Y: -48, cp2X: -52, cp2Y: -48}\r\n                                ], noMirror: true\r\n                            });\r\n                            item_drawing.accents.push({\r\n                                type: \"line\", coords: [{X: 129, Y: 0},\r\n                                    {X: 136, Y: 26, cp1X: 132, cp1Y: 14, cp2X: 133, cp2Y: 18},\r\n                                    {X: 78, Y: 125, cp1X: 123, cp1Y: 63, cp2X: 100, cp2Y: 95},\r\n                                    {X: 37, Y: 78, cp1X: 60, cp1Y: 106, cp2X: 51, cp2Y: 101},\r\n                                    {X: -12, Y: 111, cp1X: 24, cp1Y: 8, cp2X: -32, cp2Y: 66}\r\n                                ], noMirror: true\r\n                            });\t// non mirrored turnover collar right\r\n                            item_drawing.accents.push({\r\n                                type: \"line\", coords: [{X: -129, Y: 0},\r\n                                    {X: -136, Y: 26, cp1X: -132, cp1Y: 14, cp2X: -133, cp2Y: 18},\r\n                                    {X: -90, Y: 127, cp1X: -127, cp1Y: 68, cp2X: -106, cp2Y: 110},\r\n                                    {X: -9, Y: 59, cp1X: -33, cp1Y: 88, cp2X: -61, cp2Y: 25}\r\n                                ], noMirror: true\r\n                            });\t// non mirrored turnover collar left\r\n                            item_drawing.accents.push({type: \"circle\", coords: [{X: 0, Y: 100, R: 5}]});\r\n                            measurement_arrows.neck_opening_width = {\r\n                                mirror: false,\r\n                                coords: [{X: 0, Y: -47}, {X: 100, Y: -35, cp1X: 64, cp1Y: -48, cp2X: 105, cp2Y: -47},\r\n                                    {X: -5, Y: 59, cp1X: 66, cp1Y: 8, cp2X: 6, cp2Y: 40}, {\r\n                                        X: -104,\r\n                                        Y: -34,\r\n                                        cp1X: -25,\r\n                                        cp1Y: 32,\r\n                                        cp2X: -93,\r\n                                        cp2Y: -12\r\n                                    },\r\n                                    {X: 0, Y: -46, cp1X: -117, cp1Y: -48, cp2X: -52, cp2Y: -48}],\r\n                                style: \"line\",\r\n                                lift: false,\r\n                                midCircle: {X: 0, Y: -47},\r\n                                color: arrowColor\r\n                            };\r\n                            measurement_arrows.shoulder_width = {\r\n                                mirror: false,\r\n                                coords: [{X: -329, Y: 49}, {X: -129, Y: -5}],\r\n                                style: \"line\",\r\n                                lift: true,\r\n                                color: arrowColor\r\n                            };\r\n                            measurement_arrows.front_height = {\r\n                                mirror: false,\r\n                                coords: [{X: -167, Y: -4}, {X: -167, Y: 978}],\r\n                                style: \"line\",\r\n                                lift: false,\r\n                                color: arrowColor\r\n                            };\r\n\r\n                            break;\r\n                        case 3:\t// hood\r\n                            item_drawing.coords.push({X: 0, Y: -390}, {\r\n                                X: 185,\r\n                                Y: 6,\r\n                                cp1X: 180,\r\n                                cp1Y: -400,\r\n                                cp2X: 160,\r\n                                cp2Y: -20\r\n                            });\r\n                            item_drawing.accents.push({\r\n                                type: \"line\",\r\n                                coords: [{X: 185, Y: 6}, {X: 0, Y: 123, cp1X: 140, cp1Y: 70, cp2X: 70, cp2Y: 100}]\r\n                            });\t// basic round collar line\r\n                            item_drawing.accents.push({\r\n                                type: \"area\",\r\n                                coords: [{X: 0, Y: -320}, {\r\n                                    X: 144,\r\n                                    Y: 0,\r\n                                    cp1X: 150,\r\n                                    cp1Y: -320,\r\n                                    cp2X: 140,\r\n                                    cp2Y: -20\r\n                                }, {X: 0, Y: 100, cp1X: 140, cp1Y: 46, cp2X: 40, cp2Y: 92}]\r\n                            }); // hood area\r\n                            measurement_arrows.shoulder_width = {\r\n                                mirror: false,\r\n                                coords: [{X: -329, Y: 42}, {X: -174, Y: -7}],\r\n                                style: \"line\",\r\n                                lift: true,\r\n                                color: arrowColor\r\n                            };\r\n                            break;\r\n                        case 5:\t// open high round\r\n                            item_drawing.coords.push({X: 0, Y: 90}, {X: 189, Y: 0});\r\n                            item_drawing.accents.push({\r\n                                type: \"line\",\r\n                                coords: [{X: 210, Y: 6}, {X: 0, Y: 123, cp1X: 165, cp1Y: 70, cp2X: 100, cp2Y: 123}]\r\n                            });\t// open round collar line\r\n                            item_drawing.accents.push({\r\n                                type: \"area\",\r\n                                coords: [{X: 0, Y: 49}, {X: 189, Y: 0, cp1X: 100, cp1Y: 47, cp2X: 155, cp2Y: 23}, {\r\n                                    X: 0,\r\n                                    Y: 102,\r\n                                    cp1X: 165,\r\n                                    cp1Y: 46,\r\n                                    cp2X: 95,\r\n                                    cp2Y: 102\r\n                                }]\r\n                            }); // open collar area\r\n                            break;\r\n                        case 6:\t// open low round\r\n                            item_drawing.coords.push({X: 0, Y: 180}, {X: 164, Y: 0});\r\n                            item_drawing.accents.push({\r\n                                type: \"line\",\r\n                                coords: [{X: 181, Y: 5}, {X: 0, Y: 196, cp1X: 146, cp1Y: 196, cp2X: 50, cp2Y: 196}]\r\n                            });\t// collar line\r\n                            item_drawing.accents.push({\r\n                                type: \"area\",\r\n                                coords: [{X: 0, Y: 47}, {X: 164, Y: 0, cp1X: 55, cp1Y: 45, cp2X: 130, cp2Y: 23}, {\r\n                                    X: 0,\r\n                                    Y: 180,\r\n                                    cp1X: 130,\r\n                                    cp1Y: 180,\r\n                                    cp2X: 45,\r\n                                    cp2Y: 180\r\n                                }]\r\n                            }); // basic area\r\n                            break;\r\n                        case 7:\t// v-style high\r\n                            item_drawing.coords.push({X: 0, Y: 90}, {X: 189, Y: 0});\r\n                            item_drawing.accents.push({\r\n                                type: \"line\",\r\n                                coords: [{X: 210, Y: 6}, {X: 0, Y: 123, cp1X: 165, cp1Y: 70, cp2X: 80, cp2Y: 100}]\r\n                            });\t// open round collar line\r\n                            item_drawing.accents.push({\r\n                                type: \"area\",\r\n                                coords: [{X: 0, Y: 47}, {X: 189, Y: 0, cp1X: 80, cp1Y: 45, cp2X: 155, cp2Y: 23}, {\r\n                                    X: 0,\r\n                                    Y: 100,\r\n                                    cp1X: 165,\r\n                                    cp1Y: 46,\r\n                                    cp2X: 65,\r\n                                    cp2Y: 92\r\n                                }]\r\n                            }); // open collar area\r\n                            break;\r\n                        case 8:\t// v-style low\r\n                            item_drawing.coords.push({X: 0, Y: 90}, {X: 189, Y: 0});\r\n                            item_drawing.accents.push({\r\n                                type: \"line\",\r\n                                coords: [{X: 210, Y: 6}, {X: 0, Y: 123, cp1X: 165, cp1Y: 70, cp2X: 80, cp2Y: 100}]\r\n                            });\t// open round collar line\r\n                            item_drawing.accents.push({\r\n                                type: \"area\",\r\n                                coords: [{X: 0, Y: 47}, {X: 189, Y: 0, cp1X: 80, cp1Y: 45, cp2X: 155, cp2Y: 23}, {\r\n                                    X: 0,\r\n                                    Y: 100,\r\n                                    cp1X: 165,\r\n                                    cp1Y: 46,\r\n                                    cp2X: 65,\r\n                                    cp2Y: 92\r\n                                }]\r\n                            }); // open collar area\r\n                            break;\r\n                        default:\t// elastic round\r\n                            item_drawing.coords.push({X: 0, Y: 90}, {X: 164, Y: 0});\r\n                            item_drawing.accents.push({\r\n                                type: \"line\",\r\n                                coords: [{X: 185, Y: 6}, {X: 0, Y: 110, cp1X: 140, cp1Y: 70, cp2X: 70, cp2Y: 108}]\r\n                            });\t// basic round collar line\r\n                            item_drawing.accents.push({\r\n                                type: \"area\",\r\n                                coords: [{X: 0, Y: 47}, {X: 164, Y: 0, cp1X: 55, cp1Y: 45, cp2X: 130, cp2Y: 23}, {\r\n                                    X: 0,\r\n                                    Y: 90,\r\n                                    cp1X: 140,\r\n                                    cp1Y: 46,\r\n                                    cp2X: 55,\r\n                                    cp2Y: 90\r\n                                }]\r\n                            }); // basic area\r\n                            break;\r\n                    }\r\n\r\n                    switch (itemTypeArr[3]) { // sleeve length\r\n                        case 0:\t// tank top, string top or poncho\r\n                        case 1:\t// very short (vest)\r\n                            item_drawing.coords.push({X: 289, Y: 34});\r\n                            item_drawing.coords.push({X: 250, Y: 399, cp1X: 285, cp1Y: 44, cp2X: 220, cp2Y: 389});\r\n                            measurement_arrows.shoulder_width = {\r\n                                mirror: false,\r\n                                coords: [{X: -299, Y: 32}, {X: -164, Y: -7}],\r\n                                style: \"line\",\r\n                                lift: true,\r\n                                color: arrowColor\r\n                            };\r\n                            measurement_arrows.sleeve_top_width = {\r\n                                mirror: false,\r\n                                coords: [{X: 250, Y: 399}, {X: 289, Y: 34}],\r\n                                style: arcStyle,\r\n                                lift: false,\r\n                                color: arrowColor\r\n                            };\r\n\r\n                            if (itemTypeArr[4] !== 0) {\r\n                                // is it you, poncho?\r\n                                item_drawing.coords.push({X: 250, Y: 399, cp1X: 328, cp1Y: 44, cp2X: 250, cp2Y: 260});\r\n                                FIT_ORDER.splice(13, 1);  // remove sleeve top\r\n                                measurement_arrows.sleeve_top_width = false;\r\n                            }\r\n                            break;\r\n                        case 2:  // short\r\n                        case 3:  // short-medium (normal t-shirt)\r\n                            item_drawing.coords.push({X: 329, Y: 44});\r\n                            item_drawing.coords.push({X: 482, Y: 460}, {X: 324, Y: 529});\r\n                            item_drawing.coords.push({X: 250, Y: 399});\r\n\r\n                            measurement_arrows.sleeve_top_width = {\r\n                                mirror: false,\r\n                                coords: [{X: 250, Y: 399}, {X: 430, Y: 322}],\r\n                                style: arcStyle,\r\n                                lift: false,\r\n                                color: arrowColor\r\n                            };\r\n                            measurement_arrows.wrist_width = {\r\n                                mirror: false,\r\n                                coords: [{X: 324, Y: 529}, {X: 482, Y: 460}],\r\n                                style: arcStyle,\r\n                                lift: false,\r\n                                color: arrowColor\r\n                            };\r\n\r\n                            i18n.MEASUREMENT.wrist_width = i18n.MEASUREMENT.sleeve_opening;\r\n\r\n                            switch (itemTypeArr[2]) { // shoulder types\r\n                                case 3:\t// dropped\r\n                                    item_drawing.accents.push({\r\n                                        type: \"line\",\r\n                                        coords: [{X: 250, Y: 399}, {X: 381, Y: 184}]\r\n                                    });\r\n                                    measurement_arrows.sleeve = {\r\n                                        mirror: false,\r\n                                        coords: [{X: 174, Y: -16}, {X: 329, Y: 27}, {X: 482, Y: 460}],\r\n                                        style: \"line\",\r\n                                        lift: true,\r\n                                        midCircle: {X: 406, Y: 243},\r\n                                        color: arrowColor\r\n                                    };\r\n                                    break;\r\n                                case 2:\t// raglan line\r\n                                    item_drawing.accents.push({\r\n                                        type: \"line\",\r\n                                        coords: [{X: 250, Y: 399}, {\r\n                                            X: 185,\r\n                                            Y: 6,\r\n                                            cp1X: 220,\r\n                                            cp1Y: 320,\r\n                                            cp2X: 185,\r\n                                            cp2Y: 6\r\n                                        }]\r\n                                    });\r\n                                    measurement_arrows.sleeve = {\r\n                                        mirror: false,\r\n                                        coords: [{X: 174, Y: -16}, {X: 329, Y: 27}, {X: 482, Y: 460}],\r\n                                        style: \"line\",\r\n                                        lift: true,\r\n                                        midCircle: {X: 406, Y: 243},\r\n                                        color: arrowColor\r\n                                    };\r\n                                    break;\r\n                                case 1:\t// normal shoulder line\r\n                                    measurement_arrows.sleeve = {\r\n                                        mirror: false,\r\n                                        coords: [{X: 329, Y: 44}, {X: 482, Y: 460}],\r\n                                        style: \"line\",\r\n                                        lift: true,\r\n                                        color: arrowColor\r\n                                    };\r\n                                    item_drawing.accents.push({\r\n                                        type: \"line\",\r\n                                        coords: [{X: 250, Y: 399}, {\r\n                                            X: 329,\r\n                                            Y: 44,\r\n                                            cp1X: 250,\r\n                                            cp1Y: 250,\r\n                                            cp2X: 300,\r\n                                            cp2Y: 70\r\n                                        }]\r\n                                    });\r\n                                    break;\r\n                            }\r\n                            break;\r\n                        case 4:  // medium\r\n                        case 5:  // semi-long\r\n                            item_drawing.coords.push({X: 329, Y: 44});\r\n                            item_drawing.coords.push({X: 527, Y: 719}, {X: 389, Y: 769});\r\n                            item_drawing.coords.push({X: 250, Y: 399});\r\n\r\n                            measurement_arrows.sleeve_top_width = {\r\n                                mirror: false,\r\n                                coords: [{X: 250, Y: 399}, {X: 419, Y: 340}],\r\n                                style: arcStyle,\r\n                                lift: false,\r\n                                color: arrowColor\r\n                            };\r\n                            measurement_arrows.wrist_width = {\r\n                                mirror: false,\r\n                                coords: [{X: 389, Y: 769}, {X: 527, Y: 719}],\r\n                                style: arcStyle,\r\n                                lift: false,\r\n                                color: arrowColor\r\n                            };\r\n\r\n                            i18n.MEASUREMENT.wrist_width = i18n.MEASUREMENT.sleeve_opening;\r\n\r\n                            switch (itemTypeArr[2]) { // shoulder types\r\n                                case 3:\t// dropped\r\n                                    item_drawing.accents.push({\r\n                                        type: \"line\",\r\n                                        coords: [{X: 250, Y: 399}, {X: 369, Y: 196}]\r\n                                    });\r\n                                    measurement_arrows.sleeve = {\r\n                                        mirror: false,\r\n                                        coords: [{X: 174, Y: -16}, {X: 329, Y: 27}, {X: 527, Y: 719}],\r\n                                        style: \"line\",\r\n                                        lift: true,\r\n                                        midCircle: {X: 450, Y: 444},\r\n                                        color: arrowColor\r\n                                    };\r\n                                    break;\r\n                                case 2:\t// raglan line\r\n                                    item_drawing.accents.push({\r\n                                        type: \"line\",\r\n                                        coords: [{X: 250, Y: 399}, {\r\n                                            X: 185,\r\n                                            Y: 6,\r\n                                            cp1X: 220,\r\n                                            cp1Y: 320,\r\n                                            cp2X: 185,\r\n                                            cp2Y: 6\r\n                                        }]\r\n                                    });\r\n                                    measurement_arrows.sleeve = {\r\n                                        mirror: false,\r\n                                        coords: [{X: 174, Y: -16}, {X: 329, Y: 27}, {X: 527, Y: 719}],\r\n                                        style: \"line\",\r\n                                        lift: true,\r\n                                        midCircle: {X: 450, Y: 444},\r\n                                        color: arrowColor\r\n                                    };\r\n                                    break;\r\n                                case 1:\t// normal shoulder line\r\n                                    measurement_arrows.sleeve = {\r\n                                        mirror: false,\r\n                                        coords: [{X: 329, Y: 44}, {X: 527, Y: 719}],\r\n                                        style: \"line\",\r\n                                        lift: true,\r\n                                        color: arrowColor\r\n                                    };\r\n                                    item_drawing.accents.push({\r\n                                        type: \"line\",\r\n                                        coords: [{X: 250, Y: 399}, {\r\n                                            X: 329,\r\n                                            Y: 44,\r\n                                            cp1X: 250,\r\n                                            cp1Y: 250,\r\n                                            cp2X: 300,\r\n                                            cp2Y: 70\r\n                                        }]\r\n                                    });\r\n                                    break;\r\n                            }\r\n                            break;\r\n                        case 6:  // long\r\n                        case 7:  // very long\r\n                        case 8:  // extra long\r\n                            item_drawing.coords.push({X: 329, Y: 44});\r\n                            measurement_arrows.sleeve_top_width = {\r\n                                mirror: false,\r\n                                coords: [{X: 250, Y: 399}, {X: 410, Y: 348}],\r\n                                style: arcStyle,\r\n                                lift: false,\r\n                                color: arrowColor\r\n                            };\r\n\r\n                            if (itemTypeArr[4] === 1) {\t// elastic\r\n                                item_drawing.coords.push({X: 556, Y: 902}, {X: 547, Y: 930}, {X: 557, Y: 978}, {\r\n                                    X: 463,\r\n                                    Y: 998\r\n                                }, {X: 449, Y: 951}, {X: 430, Y: 934});\r\n                                item_drawing.accents.push({type: \"line\", coords: [{X: 465, Y: 944}, {X: 476, Y: 996}]},\r\n                                    {type: \"line\", coords: [{X: 476, Y: 941}, {X: 487, Y: 993}]},\r\n                                    {type: \"line\", coords: [{X: 487, Y: 938}, {X: 498, Y: 990}]},\r\n                                    {type: \"line\", coords: [{X: 498, Y: 935}, {X: 509, Y: 987}]},\r\n                                    {type: \"line\", coords: [{X: 509, Y: 932}, {X: 520, Y: 984}]},\r\n                                    {type: \"line\", coords: [{X: 520, Y: 929}, {X: 531, Y: 981}]},\r\n                                    {type: \"line\", coords: [{X: 531, Y: 926}, {X: 542, Y: 978}]});\r\n                                item_drawing.coords.push({X: 250, Y: 399});\r\n                                measurement_arrows.wrist_width = {\r\n                                    mirror: false,\r\n                                    coords: [{X: 430, Y: 934}, {X: 556, Y: 902}],\r\n                                    style: arcStyle,\r\n                                    lift: false,\r\n                                    color: arrowColor\r\n                                };\r\n                            } else {\r\n                                item_drawing.coords.push({X: 571, Y: 978}, {X: 454, Y: 1009});\r\n                                item_drawing.coords.push({X: 250, Y: 399});\r\n                                measurement_arrows.wrist_width = {\r\n                                    mirror: false,\r\n                                    coords: [{X: 571, Y: 978}, {X: 454, Y: 1009}],\r\n                                    style: arcStyle,\r\n                                    lift: false,\r\n                                    color: arrowColor\r\n                                };\r\n                            }\r\n\r\n                            switch (itemTypeArr[2]) { // shoulder types\r\n                                case 3:\t// dropped\r\n                                    item_drawing.accents.push({\r\n                                        type: \"line\",\r\n                                        coords: [{X: 250, Y: 399}, {X: 369, Y: 196}]\r\n                                    });\r\n                                    measurement_arrows.sleeve = {\r\n                                        mirror: false,\r\n                                        coords: [{X: 174, Y: -16}, {X: 329, Y: 27}, {X: 571, Y: 978}],\r\n                                        style: \"line\",\r\n                                        lift: true,\r\n                                        midCircle: {X: 437, Y: 444},\r\n                                        color: arrowColor\r\n                                    };\r\n                                    break;\r\n                                case 2:\t// raglan line\r\n                                    item_drawing.accents.push({\r\n                                        type: \"line\",\r\n                                        coords: [{X: 250, Y: 399}, {\r\n                                            X: 185,\r\n                                            Y: 6,\r\n                                            cp1X: 220,\r\n                                            cp1Y: 320,\r\n                                            cp2X: 185,\r\n                                            cp2Y: 6\r\n                                        }]\r\n                                    });\r\n                                    measurement_arrows.sleeve = {\r\n                                        mirror: false,\r\n                                        coords: [{X: 174, Y: -16}, {X: 329, Y: 27}, {X: 571, Y: 978}],\r\n                                        style: \"line\",\r\n                                        lift: true,\r\n                                        midCircle: {X: 437, Y: 444},\r\n                                        color: arrowColor\r\n                                    };\r\n                                    break;\r\n                                case 1:\t// normal shoulder line\r\n                                    measurement_arrows.sleeve = {\r\n                                        mirror: false,\r\n                                        coords: [{X: 329, Y: 44}, {X: 569, Y: 975}],\r\n                                        style: \"line\",\r\n                                        lift: true,\r\n                                        color: arrowColor\r\n                                    };\r\n                                    item_drawing.accents.push({\r\n                                        type: \"line\",\r\n                                        coords: [{X: 250, Y: 399}, {\r\n                                            X: 329,\r\n                                            Y: 44,\r\n                                            cp1X: 250,\r\n                                            cp1Y: 250,\r\n                                            cp2X: 300,\r\n                                            cp2Y: 70\r\n                                        }]\r\n                                    });\r\n                                    break;\r\n                            }\r\n                            break;\r\n                    }\r\n\r\n                    switch (itemTypeArr[5]) { // waistband\r\n                        case 0:\t// poncho dude\r\n                            item_drawing.coords.push({X: 550, Y: 750, cp1X: 450, cp1Y: 70, cp2X: 450, cp2Y: 550});\r\n                            item_drawing.coords.push({X: 0, Y: 1038, cp1X: 450, cp1Y: 800, cp2X: 400, cp2Y: 1038});\r\n                            measurement_arrows.front_height = {\r\n                                mirror: false,\r\n                                coords: [{X: -174, Y: 5}, {X: -174, Y: 1018}],\r\n                                style: \"line\",\r\n                                lift: false,\r\n                                color: arrowColor\r\n                            };\r\n                            measurement_arrows.sleeve = {\r\n                                mirror: false,\r\n                                coords: [{X: 174, Y: 0}, {X: 394, Y: 59}, {X: 550, Y: 750}],\r\n                                style: \"line\",\r\n                                lift: true,\r\n                                midCircle: {X: 480, Y: 444},\r\n                                color: arrowColor\r\n                            };\r\n                            break;\r\n                        case 3:\t// pant waist\r\n                            if (itemTypeArr[6] === 1) {\t// elastic\r\n                                item_drawing.coords.push({\r\n                                    X: 250,\r\n                                    Y: 908,\r\n                                    cp1X: 247,\r\n                                    cp1Y: 402,\r\n                                    cp2X: 247,\r\n                                    cp2Y: 858\r\n                                }, {X: 230, Y: 978}, {X: 0, Y: 978});\r\n                                for ($i = 0; $i < 15; $i++) {\r\n                                    $x = Math.round(($i + 0.5) * (230 / 15));\r\n                                    item_drawing.accents.push({\r\n                                        type: \"line\",\r\n                                        coords: [{X: $x, Y: 918}, {X: $x, Y: 978}]\r\n                                    });\r\n                                }\r\n                                measurement_arrows.pant_waist = {\r\n                                    mirror: false,\r\n                                    coords: [{X: -250, Y: 908}, {X: 250, Y: 908}],\r\n                                    style: arcStyle,\r\n                                    lift: false,\r\n                                    color: arrowColor\r\n                                };\r\n                            } else {\r\n                                item_drawing.coords.push({\r\n                                    X: 250,\r\n                                    Y: 978,\r\n                                    cp1X: 245,\r\n                                    cp1Y: 402,\r\n                                    cp2X: 245,\r\n                                    cp2Y: 928\r\n                                }, {X: 0, Y: 978});\r\n                                measurement_arrows.pant_waist = {\r\n                                    mirror: false,\r\n                                    coords: [{X: -250, Y: 978}, {X: 250, Y: 978}],\r\n                                    style: arcStyle,\r\n                                    lift: false,\r\n                                    color: arrowColor\r\n                                };\r\n                            }\r\n                            break;\r\n                        case 4:\t// hips\r\n                        /* falls through */\r\n                        case 5:\t// half-way-thigh\r\n                        /* falls through */\r\n                        default:\r\n                            var $base_y = 978;\r\n                            if (itemTypeArr[5] === 5) {\r\n                                $base_y = 1038;\r\n                            }\r\n                            if (itemTypeArr[6] === 1) {\t// elastic\r\n                                item_drawing.coords.push({\r\n                                    X: 250,\r\n                                    Y: $base_y,\r\n                                    cp1X: 247,\r\n                                    cp1Y: 402,\r\n                                    cp2X: 247,\r\n                                    cp2Y: 908\r\n                                }, {X: 230, Y: ($base_y + 60)}, {X: 0, Y: ($base_y + 60)});\r\n                                for ($i = 0; $i < 15; $i++) {\r\n                                    $x = Math.round(($i + 0.5) * (230 / 15));\r\n                                    item_drawing.accents.push({\r\n                                        type: \"line\",\r\n                                        coords: [{X: $x, Y: ($base_y + 10)}, {X: $x, Y: ($base_y + 60)}]\r\n                                    });\r\n                                }\r\n                                measurement_arrows.front_height.coords[1].Y = ($base_y + 60);\r\n                                measurement_arrows.hips = {\r\n                                    mirror: false,\r\n                                    coords: [{X: -250, Y: $base_y}, {X: 250, Y: $base_y}],\r\n                                    style: arcStyle,\r\n                                    lift: false,\r\n                                    color: arrowColor\r\n                                };\r\n                            } else {\r\n                                item_drawing.coords.push({\r\n                                    X: 250,\r\n                                    Y: ($base_y + 60),\r\n                                    cp1X: 245,\r\n                                    cp1Y: 402,\r\n                                    cp2X: 245,\r\n                                    cp2Y: $base_y\r\n                                }, {X: 0, Y: ($base_y + 60)});\r\n                                measurement_arrows.front_height.coords[1].Y = ($base_y + 60);\r\n                                measurement_arrows.hips = {\r\n                                    mirror: false,\r\n                                    coords: [{X: -250, Y: ($base_y + 60)}, {X: 250, Y: ($base_y + 60)}],\r\n                                    style: arcStyle,\r\n                                    lift: false,\r\n                                    color: arrowColor\r\n                                };\r\n                            }\r\n                            // define just in case\r\n                            measurement_arrows.pant_waist = {\r\n                                mirror: false,\r\n                                coords: [{X: -250, Y: 958}, {X: 250, Y: 958}],\r\n                                style: arcStyle,\r\n                                lift: false,\r\n                                color: arrowColor\r\n                            };\r\n                            break;\r\n                    }\r\n\r\n                    break;\t// case 1 shirts/coats\r\n\r\n                case 2:\t// trousers/shorts\r\n                    item_drawing.mirror = false; // for accents mainly\r\n                    item_drawing.coords.push({X: -232, Y: 0}, {\r\n                        X: 222,\r\n                        Y: 0,\r\n                        cp1X: -100,\r\n                        cp1Y: 10,\r\n                        cp2X: 90,\r\n                        cp2Y: 10\r\n                    }, {X: 263, Y: 171});\r\n\r\n                    switch (itemTypeArr[3]) { // sleeve\r\n                        case 1:\t// very short\r\n                        case 2:\t// short\r\n                        case 3:\t// short-medium\r\n                            item_drawing.coords.push({X: 278, Y: 449}, {X: 38, Y: 474});\r\n                            break;\r\n                        case 4:\t// medium\r\n                            item_drawing.coords.push({X: 291, Y: 626}, {X: 71, Y: 651});\r\n                            break;\r\n                        case 5:  // semi-long\r\n                        case 6:  // long\r\n                            item_drawing.coords.push({X: 302, Y: 1071}, {X: 151, Y: 1084});\r\n                            break;\r\n                    }\r\n\r\n                    item_drawing.coords.push({X: 5, Y: 297}, {X: -17, Y: 297});\r\n\r\n                    switch (itemTypeArr[3]) { // sleeve again as not mirror\r\n                        case 1:\t// very short\r\n                        case 2:\t// short\r\n                        case 3:\t// short-medium\r\n                            item_drawing.coords.push({X: -38, Y: 474}, {X: -278, Y: 449});\r\n                            measurement_arrows.outseam = {\r\n                                mirror: false,\r\n                                coords: [{X: 222, Y: 0}, {X: 263, Y: 171}, {X: 278, Y: 449}],\r\n                                style: \"line\",\r\n                                lift: true,\r\n                                color: arrowColor\r\n                            };\r\n                            measurement_arrows.knee_width = {\r\n                                mirror: false,\r\n                                coords: [{X: -278, Y: 449}, {X: -38, Y: 474}],\r\n                                style: arcStyle,\r\n                                lift: false,\r\n                                color: arrowColor\r\n                            };\r\n                            break;\r\n                        case 4:\t// medium\r\n                            item_drawing.coords.push({X: -71, Y: 651}, {X: -291, Y: 626});\r\n                            measurement_arrows.outseam = {\r\n                                mirror: false,\r\n                                coords: [{X: 222, Y: 0}, {X: 263, Y: 171}, {X: 291, Y: 626}],\r\n                                style: \"line\",\r\n                                lift: true,\r\n                                color: arrowColor\r\n                            };\r\n                            measurement_arrows.knee_width = {\r\n                                mirror: false,\r\n                                coords: [{X: -291, Y: 626}, {X: -71, Y: 651}],\r\n                                style: arcStyle,\r\n                                lift: false,\r\n                                color: arrowColor\r\n                            };\r\n                            break;\r\n                        case 5:  // semi-long\r\n                        case 6:  // long\r\n                            item_drawing.coords.push({X: -152, Y: 1084}, {X: -301, Y: 1071});\r\n                            break;\r\n                    }\r\n\r\n                    item_drawing.coords.push({X: -261, Y: 171});\r\n                    item_drawing.accents.push({\r\n                            type: \"area\",\r\n                            coords: [{X: -232, Y: 0}, {X: 222, Y: 0, cp1X: -100, cp1Y: 10, cp2X: 90, cp2Y: 10}, {\r\n                                X: -232,\r\n                                Y: 0,\r\n                                cp1X: 122,\r\n                                cp1Y: 40,\r\n                                cp2X: -132,\r\n                                cp2Y: 40\r\n                            }]\r\n                        },\r\n                        {\r\n                            type: \"line\",\r\n                            coords: [{X: -237, Y: 37}, {X: 229, Y: 37, cp1X: -137, cp1Y: 76, cp2X: 129, cp2Y: 76}]\r\n                        },\r\n                        {\r\n                            type: \"line\",\r\n                            coords: [{X: -14, Y: 19}, {X: -8, Y: 297, cp1X: 3, cp1Y: 114, cp2X: 0, cp2Y: 215}]\r\n                        },\r\n                        {\r\n                            type: \"line\",\r\n                            coords: [{X: -4, Y: 254}, {X: 29, Y: 64, cp1X: 34, cp1Y: 242, cp2X: 35, cp2Y: 188}]\r\n                        },\r\n                        {\r\n                            type: \"line\",\r\n                            coords: [{X: -233, Y: 160}, {X: -147, Y: 81, cp1X: -182, cp1Y: 157, cp2X: -152, cp2Y: 123}]\r\n                        },\r\n                        {\r\n                            type: \"line\",\r\n                            coords: [{X: 150, Y: 85}, {X: 236, Y: 164, cp1X: 158, cp1Y: 128, cp2X: 195, cp2Y: 160}]\r\n                        });\r\n                    if (itemTypeArr[6] === '4') {\t// rope waistband\r\n                        item_drawing.accents.push({\r\n                                type: \"line\",\r\n                                coords: [{X: 9, Y: 49}, {X: 8, Y: 47, cp1X: -24, cp1Y: 168, cp2X: -69, cp2Y: 84}]\r\n                            },\r\n                            {\r\n                                type: \"line\",\r\n                                coords: [{X: 9, Y: 50}, {X: 8, Y: 49, cp1X: 47, cp1Y: 149, cp2X: 70, cp2Y: 99}]\r\n                            },\r\n                            {\r\n                                type: \"line\",\r\n                                coords: [{X: 9, Y: 49}, {X: 49, Y: 49, cp1X: 27, cp1Y: 59, cp2X: 36, cp2Y: 54}]\r\n                            },\r\n                            {\r\n                                type: \"line\",\r\n                                coords: [{X: 9, Y: 49}, {X: 9, Y: 64, cp1X: 11, cp1Y: 54, cp2X: 11, cp2Y: 54}]\r\n                            });\r\n                    } else {\r\n                        item_drawing.accents.push({type: \"circle\", coords: [{X: 9, Y: 48, R: 10}]});\r\n                    }\r\n\r\n                    break; \t// case 2 trousers\r\n\r\n                case 3:\t// shoes for my friends\r\n                    item_drawing.mirror = false;\r\n                    item_drawing.coords = [{X: 130, Y: 0}, {X: 363, Y: 456, cp1X: 240, cp1Y: 8, cp2X: 345, cp2Y: 214},\r\n                        {X: 328, Y: 633, cp1X: 358, cp1Y: 532, cp2X: 328, cp2Y: 564}, {\r\n                            X: 182,\r\n                            Y: 999,\r\n                            cp1X: 330,\r\n                            cp1Y: 732,\r\n                            cp2X: 327,\r\n                            cp2Y: 994\r\n                        },\r\n                        {X: 48, Y: 628, cp1X: 3, cp1Y: 994, cp2X: 48, cp2Y: 789},\r\n                        {X: 0, Y: 340, cp1X: 42, cp1Y: 447, cp2X: 0, cp2Y: 444}, {\r\n                            X: 130,\r\n                            Y: 0,\r\n                            cp1X: 0,\r\n                            cp1Y: 114,\r\n                            cp2X: 72,\r\n                            cp2Y: 0\r\n                        }];\r\n                    item_drawing.accents = [{\r\n                        type: \"area\",\r\n                        coords: [{X: 164, Y: 625}, {\r\n                            X: 266,\r\n                            Y: 716,\r\n                            cp1X: 270,\r\n                            cp1Y: 632,\r\n                            cp2X: 276,\r\n                            cp2Y: 638\r\n                        }, {X: 168, Y: 990, cp1X: 236, cp1Y: 982, cp2X: 208, cp2Y: 987},\r\n                            {X: 69, Y: 716, cp1X: 92, cp1Y: 978, cp2X: 83, cp2Y: 852}, {\r\n                                X: 164,\r\n                                Y: 625,\r\n                                cp1X: 64,\r\n                                cp1Y: 641,\r\n                                cp2X: 57,\r\n                                cp2Y: 628\r\n                            }]\r\n                    },\r\n                        {\r\n                            type: \"line\",\r\n                            coords: [{X: 103, Y: 431}, {X: 212, Y: 430, cp1X: 112, cp1Y: 404, cp2X: 203, cp2Y: 405}]\r\n                        },\r\n                        {\r\n                            type: \"line\",\r\n                            coords: [{X: 115, Y: 469}, {X: 200, Y: 469, cp1X: 121, cp1Y: 447, cp2X: 188, cp2Y: 450}]\r\n                        },\r\n                        {\r\n                            type: \"line\",\r\n                            coords: [{X: 115, Y: 506}, {X: 200, Y: 506, cp1X: 121, cp1Y: 484, cp2X: 188, cp2Y: 484}]\r\n                        },\r\n                        {\r\n                            type: \"line\",\r\n                            coords: [{X: 115, Y: 555}, {X: 200, Y: 555, cp1X: 121, cp1Y: 533, cp2X: 188, cp2Y: 533}]\r\n                        },\r\n                        {\r\n                            type: \"line\",\r\n                            coords: [{X: 164, Y: 539}, {\r\n                                X: 283,\r\n                                Y: 541,\r\n                                cp1X: 242,\r\n                                cp1Y: 523,\r\n                                cp2X: 279,\r\n                                cp2Y: 609\r\n                            }, {X: 164, Y: 539, cp1X: 277, cp1Y: 492, cp2X: 209, cp2Y: 515}]\r\n                        },\r\n                        {\r\n                            type: \"line\",\r\n                            coords: [{X: 164, Y: 539}, {\r\n                                X: 45,\r\n                                Y: 492,\r\n                                cp1X: 123,\r\n                                cp1Y: 517,\r\n                                cp2X: 34,\r\n                                cp2Y: 532\r\n                            }, {X: 164, Y: 539, cp1X: 65, cp1Y: 457, cp2X: 129, cp2Y: 509}]\r\n                        }\r\n                    ];\r\n                    break;\t// case 3 shoes\r\n\r\n                case 4:\t// hats off\r\n                    switch (itemTypeArr[1]) {\r\n                        case 1:\t// bucket\r\n                            item_drawing.mirror = false;\r\n                            item_drawing.coords = [{X: 300, Y: 0},\r\n                                {X: 522, Y: 214, cp1X: 452, cp1Y: 17, cp2X: 458, cp2Y: 61},\r\n                                {X: 599, Y: 311, cp1X: 594, cp1Y: 245, cp2X: 601, cp2Y: 283},\r\n                                {X: 293, Y: 437, cp1X: 597, cp1Y: 361, cp2X: 494, cp2Y: 433},\r\n                                {X: 0, Y: 306, cp1X: 87, cp1Y: 433, cp2X: 2, cp2Y: 355},\r\n                                {X: 92, Y: 209, cp1X: 1, cp1Y: 258, cp2X: 44, cp2Y: 227},\r\n                                {X: 300, Y: 0, cp1X: 156, cp1Y: 28, cp2X: 186, cp2Y: 16}];\r\n                            item_drawing.accents = [\r\n                                {\r\n                                    type: \"line\",\r\n                                    coords: [{X: 222, Y: 48}, {X: 367, Y: 43, cp1X: 269, cp1Y: 29, cp2X: 288, cp2Y: 64}]\r\n                                },\r\n                                {\r\n                                    type: \"line\", coords: [{X: 523, Y: 214}, {X: 544, Y: 280},\r\n                                    {X: 63, Y: 278, cp1X: 376, cp1Y: 368, cp2X: 209, cp2Y: 373}, {X: 92, Y: 209}]\r\n                                }];\r\n                            break;\r\n                    }\r\n                    break;\t// case 4 hats\r\n            }\r\n        }\r\n\r\n        function getSliderHtml() {\r\n            var sliderHtml = \"\";\r\n            var basePosX = 0;\r\n            var cellTitle = \"\";\r\n            sliderHtml += \"<div class='sizeme_slider'>\";\r\n            sliderHtml += \"<div class='slider_text slider_text_above'></div>\";\r\n            sliderHtml += \"<div class='slider_container'>\";\r\n            sliderHtml += \"<div class='slider_bar'>\";\r\n            sliderHtml += \"</div>\";\r\n            if (sizeme_local_options.fitAreaSlider) {\r\n                sliderHtml += \"<div class='slider_area'></div>\";\r\n            }\r\n            sliderHtml += \"<table class='slider_table'><tr>\";\r\n            for (var singleFit in FIT_RANGES) {\r\n                if (FIT_RANGES.hasOwnProperty(singleFit)) {\r\n                    if (singleFit > 1) {\r\n                        if (basePosX !== 0) {\r\n                            var perc_width = Math.round((singleFit - basePosX) * sliderScale);\r\n                            sliderHtml += \"<td class='\" + cellTitle + \"'\";\r\n                            sliderHtml += \" style='width: \" + perc_width + \"%; min-width: \" + perc_width + \"%;'>\";\r\n                            sliderHtml += i18n.FIT_VERDICT[cellTitle];\r\n                            sliderHtml += \"</td>\";\r\n                        }\r\n                        basePosX = (+singleFit);\r\n                        cellTitle = FIT_RANGES[singleFit].label;\r\n                    }\r\n                }\r\n            }\r\n            sliderHtml += \"</tr></table>\";\r\n            sliderHtml += \"</div>\";\r\n            sliderHtml += \"<div class='slider_text slider_text_below'></div>\";\r\n            sliderHtml += \"<div class='slider_text slider_text_more_below'></div>\";\r\n            sliderHtml += \"</div>\";\r\n\r\n            return sliderHtml;\r\n        }\r\n\r\n        function sliderPos(fitValue, offset) {\r\n            var returnPos = (Math.min(fitValue, sliderPosXMax) - sliderPosXMin) * sliderScale;\r\n            returnPos = Math.max(0, returnPos);\r\n            returnPos += offset;   // with +offset for graphics\r\n\r\n            return returnPos;\r\n        }\r\n\r\n        function killExtraSlider() {\r\n            $(\"#slider_secondary\").remove();\r\n            return true;\r\n        }\r\n\r\n        function drawExtraSlider(fitValue) {\r\n            killExtraSlider(); // in case of hang arounds\r\n            var sliderHtml = \"<div class='slider_bar' id='slider_secondary'></div>\";\r\n            $(sliderHtml).hide().appendTo(\".sizeme_detailed_view_window .slider_container\").fadeIn(fadeLength);\r\n            var newWidth = sliderPos(fitValue, 0);\r\n            $(\"#slider_secondary\").width(newWidth + '%');\r\n            return true;\r\n        }\r\n\r\n\r\n        function writeSliderFlag(fitValue, fitLabel, thisSize, thisKey) {\r\n            // first, out with the old\r\n            var sliderFlagHtml = \"<div class='sliderFlag sm_sf_\" + thisSize + \"'\";\r\n            sliderFlagHtml += \" style='width: \" + sliderPos(fitValue, 0) + \"%'>\";\r\n            sliderFlagHtml += \"<a class='flagItself \" + fitLabel + \"' href='#'>\" + thisSize + \"</a>\";\r\n            sliderFlagHtml += \"</div>\";\r\n            $(\".slider_container\").append(sliderFlagHtml);\r\n            $(\".sm_sf_\" + thisSize).hover(function () {\r\n                $(this).toggleClass(\"activeFlag\");\r\n            }).click(function () {\r\n                $(uiOptions.sizeSelectionElement + ':not(\".cloned\")').val(thisKey);\r\n                $(uiOptions.invokeElement + ':not(\".cloned\")').trigger(uiOptions.invokeEvent);\r\n                return false;\r\n            });\r\n        }\r\n\r\n        function moveSlider(fitValue, shouldAnimate) {\r\n            var newWidth = sliderPos(fitValue, 0) + '%';\r\n            if (shouldAnimate) {\r\n                $('.slider_bar').stop().animate({width: newWidth});\r\n            } else {\r\n                $('.slider_bar').width(newWidth);\r\n            }\r\n        }\r\n\r\n        function moveAreaSlider(fitValue, matchMap, shouldAnimate) {\r\n            var smallestFit = 9999;\r\n            var biggestFit = 0;\r\n            var endX, startX, newWidth, newMarginLeft;\r\n            for (var measurement in matchMap) {\r\n                if (matchMap.hasOwnProperty(measurement)) {\r\n                    if (isImportant(matchMap[measurement].importance, matchMap[measurement].componentFit)) {\r\n                        if (matchMap[measurement].componentFit > 0 && matchMap[measurement].componentFit < smallestFit) {\r\n                            smallestFit = matchMap[measurement].componentFit;\r\n                        }\r\n                        if (matchMap[measurement].componentFit > 0 && matchMap[measurement].componentFit > biggestFit) {\r\n                            biggestFit = matchMap[measurement].componentFit;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (fitValue > smallestFit) {\r\n                endX = sliderPos(fitValue, 0);\r\n                startX = sliderPos(smallestFit, 0);\r\n                newWidth = (endX - startX);\r\n                newMarginLeft = startX;\r\n            } else {\r\n                endX = sliderPos(biggestFit, 0);\r\n                startX = sliderPos(fitValue, 0);\r\n                newWidth = (endX - startX);\r\n                newMarginLeft = startX;\r\n            }\r\n\r\n            if (shouldAnimate) {\r\n                $('.slider_area').stop().animate({width: newWidth + '%', marginLeft: newMarginLeft + '%'});\r\n            } else {\r\n                $('.slider_area').width(newWidth + '%').css('marginLeft', newMarginLeft + '%');\r\n            }\r\n        }\r\n\r\n        function goWriteMessages(matchMap, missingMeasurements, accuracy, totalFit) {\r\n            var $message = \"\";\r\n            var $message_type = \"\";\r\n            var $message_link = \"\";\r\n\r\n            $(\".sizeme_slider .slider_text_more_below\").empty();\r\n\r\n            if (!selectedProfile) {\r\n                $message_type = \"noMeasurements\";\r\n                $message_link = linkToSelectedProfile;\r\n                $message = i18n.MESSAGE.add_profiles;\r\n            } else {\r\n                if (missingMeasurements[0]) {\r\n                    if (missingMeasurements[0].length > 0) {\r\n                        $message_type = \"missingMeasurements\";\r\n                        $message_link = linkToSelectedProfile;\r\n                        $message = i18n.MESSAGE.missing_measurements;\r\n                    }\r\n                }\r\n\r\n                if (accuracy < accuracyThreshold) {\r\n                    $message_type = \"noMeasurements\";\r\n                    $message_link = linkToSelectedProfile;\r\n                    $message = i18n.MESSAGE.no_measurements;\r\n                }\r\n\r\n                if ((!$message_type) && (typeof matchMap.neck_opening_width !== \"undefined\")) {\r\n                    if ((totalFit >= 1000) && (matchMap.neck_opening_width.overlap < 0)) {\r\n                        $message_type = \"info\";\r\n                        $message = i18n.MESSAGE.no_top_button;\r\n                    }\r\n                }\r\n            }\r\n\r\n            if ($message_type) {\r\n                if ($message_link) {\r\n                    $('<a></a>')\r\n                        .addClass(\"message_container \" + $message_type)\r\n                        .text($message)\r\n                        .attr(\"href\", linkToSelectedProfile)\r\n                        .attr(\"target\", \"_blank\")\r\n                        .appendTo(\".sizeme_slider .slider_text_more_below\");\r\n                } else {\r\n                    $('<div></div>')\r\n                        .addClass(\"message_container \" + $message_type)\r\n                        .text($message)\r\n                        .appendTo(\".sizeme_slider .slider_text_more_below\");\r\n                }\r\n            }\r\n        }\r\n\r\n        function selectToButtons(sizeSelectionElement) {\r\n\t\t\tvar $selectElement = $(sizeSelectionElement);\r\n\t\t\tvar sizeCount = $selectElement.find(\"[value]\").length;\r\n\t\t\tif (!sizeCount) return;\t// quit if there are no elements to buttonize\r\n\r\n            $selectElement.hide();\r\n            var $content = $(document.createElement(\"div\")).addClass(\"sm-buttonset num_\" + sizeCount);\t// add 2 classes\r\n\r\n            $selectElement.find(\"[value]\").each(function () {\r\n\r\n                var thisVal = $(this).val();\r\n                $(this).addClass(\"sm-selectable element_for_\" + thisVal);\r\n                this.id = (thisVal ? \"input_\" + thisVal : \"choose\");\r\n\r\n                var thisId = this.id;\r\n                var thisLabel = sizeText($(this).text());\r\n                var thisClass = $(this).attr(\"class\");\r\n\r\n                var $div = $('<div>')\r\n                    .addClass('sm-button ' + thisClass)\r\n                    .attr(\"id\", \"button_\" + thisId)\r\n                    .text(thisLabel)\r\n                    .on(\"click\", function () {\r\n                        $(\".sm-buttonset\").find(\".sm-selectable\").removeClass(\"sm-state-active\");\r\n                        $(\".element_for_\" + thisVal).addClass(\"sm-state-active\");\r\n                        $(uiOptions.sizeSelectionElement + ':not(\".cloned\")').val(thisVal);\r\n                        $(uiOptions.invokeElement + ':not(\".cloned\")').trigger(uiOptions.invokeEvent);\t// yell event at original invoker\r\n                    });\r\n                $content.append($div);\r\n            });\r\n\r\n            $selectElement.after($content);\r\n            $(\"#button_choose\").remove();\r\n        }\r\n\r\n        function getMaxY(data) {\r\n            var max = 0;\r\n            for (var i = 0; i < data.coords.length; i++) {\r\n                max = Math.max(max, data.coords[i].Y);\r\n            }\r\n            return max;\r\n        }\r\n\r\n        function getMaxX(data) {\r\n            var max = 0;\r\n            for (var i = 0; i < data.coords.length; i++) {\r\n                max = Math.max(max, data.coords[i].X);\r\n            }\r\n            return max;\r\n        }\r\n\r\n        function getMinX(data) {\r\n            var min = 99999;\r\n            for (var i = 0; i < data.coords.length; i++) {\r\n                min = Math.min(min, data.coords[i].X);\r\n            }\r\n            return min;\r\n        }\r\n\r\n        function getMinY(data) {\r\n            var min = 99999;\r\n            for (var i = 0; i < data.coords.length; i++) {\r\n                min = Math.min(min, data.coords[i].Y);\r\n            }\r\n            return min;\r\n        }\r\n\r\n        function getArced(p1, p2) {\r\n            var dX = p2.X - p1.X;\r\n            p2.cp1X = p1.X + Math.round(dX / arcRadius);\r\n            p2.cp1Y = p1.Y + Math.round(dX / arcRadius);\r\n            p2.cp2X = p2.X - Math.round(dX / arcRadius);\r\n            p2.cp2Y = p2.Y + Math.round(dX / arcRadius);\r\n            return true;\r\n        }\r\n\r\n        function liftCoords(data) {\r\n            data.nX = 0;\r\n            data.nY = 0;\r\n            if (data.lift) {\r\n                for (var i = 1; i < data.coords.length; i++) {\r\n                    var dX = data.coords[i].X - data.coords[i - 1].X;\r\n                    var dY = data.coords[i].Y - data.coords[i - 1].Y;\r\n                    var angleA = Math.atan2(dY, dX);\r\n                    data.nX = Math.sin(angleA) * arrowLift;\r\n                    data.nY = -Math.cos(angleA) * arrowLift;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        function getMidPoints(data) {\r\n            var dX = data.coords[1].X - data.coords[0].X;\r\n            var dY = data.coords[1].Y - data.coords[0].Y;\r\n            data.mid = {X: Math.round(dX / 2) + data.coords[0].X, Y: Math.round(dY / 2) + data.coords[0].Y};\r\n            if (data.style === \"arc\") {\r\n                data.mid.Y += Math.round(dX / arcRadius * 0.7);\r\n            }\r\n        }\r\n\r\n        function plotItem(c, data, isArrow, scale, offsetX, offsetY, highlighted) {\r\n            function pX(coord) {\r\n                return (coord * scale) + offsetX;\r\n            }\r\n\r\n            function pY(coord) {\r\n                return (coord * scale) + offsetY;\r\n            }\r\n\r\n            var i, j, lcp;\r\n\r\n            c.beginPath();\r\n\r\n            if (isArrow) {\t// ARROW\r\n                c.lineWidth = arrowLineWidth;\r\n                if (highlighted) {\r\n                    c.lineWidth = arrowLineWidth + 2;\r\n                }\r\n                liftCoords(data);\r\n                c.moveTo(pX(data.coords[0].X + data.nX), pY(data.coords[0].Y + data.nY));\r\n                for (i = 1; i < data.coords.length; i++) {\r\n                    switch (data.style) {\r\n                        case \"circle\":\r\n                            getArced(data.coords[i - 1], data.coords[i]);\r\n                            c.bezierCurveTo(pX(data.coords[i].cp1X + data.nX), pY(data.coords[i].cp1Y + data.nY),\r\n                                pX(data.coords[i].cp2X + data.nX), pY(data.coords[i].cp2Y + data.nY),\r\n                                pX(data.coords[i].X + data.nX), pY(data.coords[i].Y + data.nY));\r\n                            c.bezierCurveTo(pX(-data.coords[i].cp1X + data.nX), pY(-data.coords[i].cp1Y + data.nY),\r\n                                pX(-data.coords[i].cp2X + data.nX), pY(-data.coords[i].cp2Y + data.nY),\r\n                                pX(data.coords[0].X + data.nX), pY(data.coords[0].Y + data.nY));\r\n                            break;\r\n                        case \"arc\":\r\n                            getArced(data.coords[i - 1], data.coords[i]);\r\n                        /* falls through */\r\n                        case \"line\":\r\n                            if (typeof data.coords[i].cp1X !== 'undefined') {\r\n                                c.bezierCurveTo(pX(data.coords[i].cp1X + data.nX), pY(data.coords[i].cp1Y + data.nY), pX(data.coords[i].cp2X + data.nX), pY(data.coords[i].cp2Y + data.nY), pX(data.coords[i].X + data.nX), pY(data.coords[i].Y + data.nY));\r\n                            } else {\r\n                                c.lineTo(pX(data.coords[i].X + data.nX), pY(data.coords[i].Y + data.nY));\r\n                            }\r\n                            break;\r\n                    }\r\n                }\r\n                c.stroke();\r\n\r\n                if (data.style === \"line\") {\r\n                    // start and end circles\r\n                    c.beginPath();\r\n                    c.arc(pX(data.coords[0].X + data.nX), pY(data.coords[0].Y + data.nY), arrowEndRadius, 0, Math.PI * 2, true);\r\n                    c.fill();\r\n                    c.beginPath();\r\n                    c.arc(pX(data.coords[data.coords.length - 1].X + data.nX), pY(data.coords[data.coords.length - 1].Y + data.nY), arrowEndRadius, 0, Math.PI * 2, true);\r\n                    c.fill();\r\n                }\r\n\r\n                // mid circle\r\n                getMidPoints(data);\r\n                if (typeof data.midCircle !== 'undefined') {\r\n                    data.mid.X = data.midCircle.X;\r\n                    data.mid.Y = data.midCircle.Y;\r\n                }\r\n                var rad = arrowNumberRadius;\r\n                if (highlighted) {\r\n                    rad += 5;\r\n                }\r\n                c.beginPath();\r\n                c.arc(pX(data.mid.X + data.nX), pY(data.mid.Y + data.nY), rad, 0, Math.PI * 2, true);\r\n                c.fill();\r\n                c.beginPath();\r\n                c.fillStyle = \"#FFFFFF\";\r\n                c.font = arrowNumberFont;\r\n                c.textAlign = \"center\";\r\n                c.textBaseline = \"middle\";\r\n                if (highlighted) {\r\n                    c.font = arrowNumberHighlightFont;\r\n                }\r\n                c.fillText(data.num, pX(data.mid.X + data.nX), pY(data.mid.Y + data.nY));\r\n\r\n            } else {\t// ITEM\r\n                c.fillStyle = fillColor;\r\n                c.strokeStyle = fillColor;\r\n                c.lineWidth = 0.1;\r\n\r\n                c.moveTo(pX(data.coords[0].X), pY(data.coords[0].Y));\r\n\r\n                for (i = 1; i < data.coords.length; i++) {\r\n                    if (typeof data.coords[i].cp1X !== 'undefined') {\r\n                        c.bezierCurveTo(pX(data.coords[i].cp1X), pY(data.coords[i].cp1Y), pX(data.coords[i].cp2X), pY(data.coords[i].cp2Y), pX(data.coords[i].X), pY(data.coords[i].Y));\r\n                    } else {\r\n                        c.lineTo(pX(data.coords[i].X), pY(data.coords[i].Y));\r\n                    }\r\n                }\r\n\r\n                if (data.mirror) {\r\n                    lcp = [{X: null, Y: null}, {X: null, Y: null}];\r\n\r\n                    for (i = data.coords.length - 1; i >= 0; i--) {\r\n                        if (lcp[0].X) {\r\n                            c.bezierCurveTo(pX(lcp[0].X), pY(lcp[0].Y), pX(lcp[1].X), pY(lcp[1].Y), pX(-data.coords[i].X), pY(data.coords[i].Y));\r\n                        } else {\r\n                            c.lineTo(pX(-data.coords[i].X), pY(data.coords[i].Y));\r\n                        }\r\n\r\n                        if (typeof data.coords[i].cp1X !== 'undefined') {\r\n                            lcp[0].X = -data.coords[i].cp2X;\r\n                            lcp[0].Y = data.coords[i].cp2Y;\r\n                            lcp[1].X = -data.coords[i].cp1X;\r\n                            lcp[1].Y = data.coords[i].cp1Y;\r\n                        } else {\r\n                            lcp = [{X: null, Y: null}, {X: null, Y: null}];\r\n                        }\r\n                    }\r\n                }\r\n\r\n                c.fill();\r\n                c.stroke();\r\n\r\n                // accents\r\n                c.fillStyle = drawColor;\r\n                c.strokeStyle = drawColor;\r\n                c.lineWidth = itemLineWidth;\r\n                c.lineCap = \"butt\";\r\n                c.lineJoin = \"miter\";\r\n                c.miterLimit = 1;\r\n\r\n                for (i = 0; i < data.accents.length; i++) {\r\n                    c.beginPath();\r\n                    if (data.accents[i].type === \"circle\") {\r\n                        c.arc(pX(data.accents[i].coords[0].X), pY(data.accents[i].coords[0].Y), data.accents[i].coords[0].R * realCanvasWidth / 1000, 0, Math.PI * 2, true);\r\n                    } else {\r\n                        c.moveTo(pX(data.accents[i].coords[0].X), pY(data.accents[i].coords[0].Y));\r\n                        for (j = 1; j < data.accents[i].coords.length; j++) {\r\n                            if (typeof data.accents[i].coords[j].cp1X !== 'undefined') {\r\n                                c.bezierCurveTo(pX(data.accents[i].coords[j].cp1X), pY(data.accents[i].coords[j].cp1Y), pX(data.accents[i].coords[j].cp2X), pY(data.accents[i].coords[j].cp2Y), pX(data.accents[i].coords[j].X), pY(data.accents[i].coords[j].Y));\r\n                            } else {\r\n                                c.lineTo(pX(data.accents[i].coords[j].X), pY(data.accents[i].coords[j].Y));\r\n                            }\r\n                        }\r\n                    }\r\n                    if (data.accents[i].type === \"area\") {\r\n                        c.fill();\r\n                    }\r\n                    c.stroke();\r\n\r\n                    if (data.mirror) {\r\n                        if (typeof data.accents[i].noMirror === 'undefined') {\r\n                            lcp = [{X: null, Y: null}, {X: null, Y: null}];\r\n                            c.beginPath();\r\n                            c.moveTo(pX(-data.accents[i].coords[data.accents[i].coords.length - 1].X), pY(data.accents[i].coords[data.accents[i].coords.length - 1].Y));\r\n                            for (j = data.accents[i].coords.length - 1; j >= 0; j--) {\r\n                                if (lcp[0].X) {\r\n                                    c.bezierCurveTo(pX(lcp[0].X), pY(lcp[0].Y), pX(lcp[1].X), pY(lcp[1].Y), pX(-data.accents[i].coords[j].X), pY(data.accents[i].coords[j].Y));\r\n                                } else {\r\n                                    c.lineTo(pX(-data.accents[i].coords[j].X), pY(data.accents[i].coords[j].Y));\r\n                                }\r\n\r\n                                if (typeof data.accents[i].coords[j].cp1X !== 'undefined') {\r\n                                    lcp[0].X = -data.accents[i].coords[j].cp2X;\r\n                                    lcp[0].Y = data.accents[i].coords[j].cp2Y;\r\n                                    lcp[1].X = -data.accents[i].coords[j].cp1X;\r\n                                    lcp[1].Y = data.accents[i].coords[j].cp1Y;\r\n                                } else {\r\n                                    lcp = [{X: null, Y: null}, {X: null, Y: null}];\r\n                                }\r\n                            }\r\n                            if (data.accents[i].type === \"area\") {\r\n                                c.fill();\r\n                            }\r\n                            c.stroke();\r\n                        }\r\n                    }\r\n                } // end for accents\r\n            }\r\n        }\r\n\r\n        function writeItemCanvas(canvas_id, matchMap, highlight) {\r\n\r\n            if (document.getElementById(canvas_id).getContext) {\r\n                var c = document.getElementById(canvas_id).getContext('2d');\r\n                $(\"#\" + canvas_id).attr(\"width\", realCanvasWidth).attr(\"height\", realCanvasHeight);\r\n\r\n                // get scale and offsets\r\n                var canvasWidth = realCanvasWidth * (1 - (2 * padding));\r\n                var canvasHeight = realCanvasHeight * (1 - (2 * padding));\r\n\r\n                var maxX = getMaxX(item_drawing) - getMinX(item_drawing);\r\n                if (item_drawing.mirror) {\r\n                    maxX = getMaxX(item_drawing) * 2;\r\n                }\r\n                var maxY = getMaxY(item_drawing) - getMinY(item_drawing);\r\n                var scale = 1;\r\n                if (maxX !== 0) {\r\n                    scale = canvasWidth / maxX;\r\n                }\r\n                if (maxY !== 0 && (canvasWidth / canvasHeight) > (maxX / maxY)) {\r\n                    scale = canvasHeight / maxY;\r\n                }\r\n\r\n                var offsetX = (realCanvasWidth - ((getMaxX(item_drawing) + getMinX(item_drawing)) * scale)) / 2;\r\n                if (item_drawing.mirror) {\r\n                    offsetX = realCanvasWidth / 2;\r\n                }\r\n                var offsetY = (realCanvasHeight - ((getMaxY(item_drawing) + getMinY(item_drawing)) * scale)) / 2;\r\n\r\n                // item\r\n                plotItem(c, item_drawing, false, scale, offsetX, offsetY, false);\r\n                var inputKey = $(uiOptions.sizeSelectionElement + ':not(\".cloned\")').val();\r\n\r\n                // arrows\r\n                if (matchMap) {\r\n                    // Detailed\r\n                    if (inputKey) {\r\n                        $.each(sizemeProduct.item.measurements[inputKey], function (measurement, value) {\r\n                            if (value > 0 && measurement_arrows[measurement]) {\r\n                                // var draw = (matchMap[measurement].componentFit > 0);\r\n                                var draw = true;\r\n                                if (draw) {\r\n                                    c.strokeStyle = measurement_arrows[measurement].color;\r\n                                    c.fillStyle = measurement_arrows[measurement].color;\r\n                                    plotItem(c, measurement_arrows[measurement], true, scale, offsetX, offsetY, (measurement === highlight && highlight !== null));\r\n                                }\r\n                            }\r\n                        });\r\n                    } else {\r\n                        plotItem(c, item_drawing, false, scale, offsetX, offsetY, false);\r\n                    }\r\n                } else {\r\n                    // Size Guider\r\n                    if (!inputKey) {\r\n                        inputKey = Object.keys(sizemeProduct.item.measurements)[0];\r\n                    }\r\n                    if (inputKey) {\r\n                        if (typeof sizemeProduct.item.measurements[inputKey] !== \"undefined\") {\r\n                            $.each(sizemeProduct.item.measurements[inputKey], function (measurement, value) {\r\n                                if (value > 0 && measurement_arrows[measurement]) {\r\n                                    c.strokeStyle = measurement_arrows[measurement].color;\r\n                                    c.fillStyle = measurement_arrows[measurement].color;\r\n                                    plotItem(c, measurement_arrows[measurement], true, scale, offsetX, offsetY, (measurement === highlight && highlight !== null));\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function initOpentip() {\r\n            Opentip.lastZIndex = 999999999;\r\n            Opentip.styles.myDefaultStyle = {\r\n                //target: true,\r\n                //tipJoint: \"center top\",\r\n                group: \"myTips\"\r\n            };\r\n            Opentip.defaultStyle = \"myDefaultStyle\";\r\n        }\r\n\r\n        function hasNeckOpening() {\r\n            var inputKey = $(uiOptions.sizeSelectionElement + ':not(\".cloned\")').val();\r\n            if (!inputKey) {\r\n                inputKey = Object.keys(sizemeProduct.item.measurements)[0];\r\n            }\r\n            var retval = false;\r\n            if (typeof sizemeProduct.item.measurements[inputKey] !== \"undefined\") {\r\n                if (typeof sizemeProduct.item.measurements[inputKey].neck_opening_width !== \"undefined\") {\r\n                    retval = (sizemeProduct.item.measurements[inputKey].neck_opening_width > 0);\r\n                }\r\n            }\r\n            return retval;\r\n        }\r\n\r\n        function noThanks() {\r\n            return readCookie(\"sizeme_no_thanks\") === \"true\";\r\n        }\r\n\r\n        function noProductSplash() {\r\n            return readCookie(\"sizeme_no_product_splash\") === \"true\";\r\n        }\r\n\r\n        function writeDetailedWindow(isSizeGuide) {\r\n            // create detailed dialog window\r\n            itemName = sizemeProduct.name;\r\n            var txts = i18n.DETAILED;\r\n            var linkTarget = \".sizeme_slider .slider_text_below\";\r\n\r\n            initOpentip();\r\n\r\n            if (isSizeGuide) {\r\n                txts = i18n.SIZE_GUIDE;\r\n                linkTarget = uiOptions.appendContentTo;\r\n            }\r\n\r\n            var $dialog = $('<div id=\"sizeme_detailed_view_content\"></div>')\r\n                .dialog({\r\n                    position: {my: \"center\", at: \"center\", of: window},\r\n                    autoOpen: false,\r\n                    dialogClass: \"sizeme_detailed_view_window\",\r\n                    minHeight: 620,\r\n                    minWidth: 940,\r\n                    scaleH: 1,\r\n                    scaleW: 1,\r\n                    closeText: i18n.COMMON.close_text,\r\n                    title: txts.window_title + ' <span class=\"name\">' + itemName + '</span>'\r\n                });\r\n\r\n            // add toggle link to main page\r\n            $(\"<a class='a_button sm_detailed_view\" + (isSizeGuide ? \" size_guide\" : \"\") + \"' id='popup_opener' href='#'>\" + txts.button_text + \"</a>\")\r\n                .click(function () {\r\n                    if (isSizeGuide) {\r\n                        SizeMe.trackEvent(\"sizeGuideOpened\", \"Store: Size guide opened\");\r\n                    } else {\r\n                        SizeMe.trackEvent(\"detailedViewOpened\", \"Store: Detailed view opened\");\r\n                    }\r\n                    $dialog.dialog('open');\r\n                    return false;\r\n                })\r\n                .appendTo(linkTarget);\r\n\r\n            // write two columns\r\n            $(\"<div class='dialog_col' id='col1'></div><div class='dialog_col' id='col2'></div>\").appendTo(\"#sizeme_detailed_view_content\");\r\n\r\n            // add bottom title bar\r\n            $(\"<div class='sm-bottombar ui-dialog-bottombar'></div>\").appendTo(\"#sizeme_detailed_view_content\");\r\n\r\n            // write item image canvas to first column\r\n            $(\"<div class='sizeme_detailed_section'></div>\")\r\n                .append(\"<canvas id='sizeme_item_view'></canvas>\")\r\n                .appendTo(\"#col1\");\r\n\r\n            // add shopping for selection to second (no cloning)\r\n            if (!isSizeGuide) {\r\n                $(\"<div class='sizeme_detailed_section'></div>\")\r\n                    .append(\"<h2>\" + i18n.COMMON.shopping_for + \"</h2>\")\r\n                    .append(\"<div class='shopping_for'></div>\")\r\n                    .appendTo(\"#col2\");\r\n\r\n                $(\"<div class='sizeme_detailed_section sizeme_detailed_size_selection_section'></div>\")\r\n                    .appendTo(\"#col2\");\r\n\r\n                // clone slider (without detailed view toggler and in content stuff)\r\n                var $slider_clone = $(\".sizeme_slider\")\r\n                    .clone(true, true)\r\n                    .find(\".slider_text_below\").remove()\r\n                    .end();\r\n\r\n                $(\"<div class='sizeme_detailed_section'></div>\")\r\n                    .append(\"<h2>\" + i18n.FIT_INFO.overall_fit + \"</h2>\")\r\n                    .append($slider_clone)\r\n                    .appendTo(\"#col2\");\r\n            }\r\n\r\n            // write detailed table to col 2\r\n            $(\"<div class='sizeme_detailed_section'></div>\")\r\n                .append(\"<h2>\" + txts.table_title + \"</h2>\")\r\n                .append(\"<table id='detailed_table'><tbody></tbody></table>\")\r\n                .appendTo(\"#col2\");\r\n\r\n            // bind hover event to run_highlights\r\n            $(\"#detailed_table\").on(\"mouseenter\", \".run_highlight\", function () {\r\n                var highlight = $(this).data(\"measurement\");\r\n                $(this).find(\"td.cell_\" + highlight).addClass(\"highlighted\");\r\n                var $matchMap = $(\"#detailed_table\").find(\"tbody\").data(\"matchMap\");\r\n                writeItemCanvas('sizeme_item_view', $matchMap, highlight);\r\n                if (sizeme_local_options.fitAreaSlider && $matchMap) {\r\n                    if ($matchMap[highlight]) {\r\n                        if (($matchMap[highlight].componentFit > 0) && (isImportant($matchMap[highlight].importance, $matchMap[highlight].componentFit))) {\r\n                            drawExtraSlider($matchMap[highlight].componentFit);\r\n                        }\r\n                    }\r\n                }\r\n            }).on(\"mouseleave\", \".run_highlight\", function () {\r\n                var highlight = $(this).data(\"measurement\");\r\n                $(this).find(\"td.cell_\" + highlight).removeClass(\"highlighted\");\r\n                writeItemCanvas('sizeme_item_view', $(\"#detailed_table\").find(\"tbody\").data(\"matchMap\"), \"\");\r\n                if (sizeme_local_options.fitAreaSlider) {\r\n                    killExtraSlider();\r\n                }\r\n            });\r\n\r\n            // disclaimers\r\n            if (isSizeGuide) {\r\n                var $txt = i18n.SIZE_GUIDE.measurement_disclaimer;\r\n                if (hasNeckOpening()) {\r\n                    $txt += \"<br />\" + i18n.SIZE_GUIDE.measurement_disclaimer_collar;\r\n                }\r\n                if (isInside()) {\r\n                    $txt = i18n.SIZE_GUIDE.measurement_disclaimer_inside;\r\n                }\r\n                $(\"<div class='sizeme_explanation'></div>\")\r\n                    .append(\"<p>\" + $txt + \"</p>\")\r\n                    .appendTo(\"#col2\");\r\n\r\n                if (sizeme_options.service_status === \"on\") {\r\n                    $(\"<div class='sizeme_advertisement'></div>\")\r\n                        .append(\"<p>\" + i18n.SIZE_GUIDE.advertisement + \" \" +\r\n                            \"<a id='sizeme_ad_link' href='\" + SizeMe.contextAddress + \"' class='logo' target='_blank'></a></p>\")\r\n                        .appendTo(\"#sizeme_detailed_view_content\");\r\n                    $(\"#sizeme_ad_link\").on(\"click\", function () {\r\n                        tokenHelper.clearAuthToken();\r\n                        if (noThanks()) {\r\n                            eraseCookie(\"sizeme_no_thanks\");\r\n                            $(\".splash\").fadeIn();\r\n                            return false;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        function isImportant(importance, componentFit) {\r\n            return (importance === 1 || ((importance === -1) && (componentFit < 1000)));\r\n        }\r\n\r\n        function colorCell($cell, value, arrow) {\r\n            if (arrow) {\r\n                arrow.color = arrowColorInfo;\r\n            }\r\n            if (value) {\r\n                var selectedFit = getFit(value.componentFit, value.importance);\r\n                $cell.addClass(selectedFit.label);\r\n                if (arrow) {\r\n                    arrow.color = selectedFit.arrowColor;\r\n                }\r\n            }\r\n            return $cell;\r\n        }\r\n\r\n        function getMissingMeasurement(missingMeasurements, measurement) {\r\n            for (var $i = 0; $i < missingMeasurements.length; $i++) {\r\n                if (missingMeasurements[$i][0] === measurement) {\r\n                    return missingMeasurements[$i][1];\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n\r\n        function isPinched(measurement) {\r\n            return (PINCHED_FITS.indexOf(measurement) >= 0);\r\n        }\r\n\r\n        function isLongFit(measurement) {\r\n            return (LONG_FITS.indexOf(measurement) >= 0);\r\n        }\r\n\r\n        function isPinchedTxt(measurement) {\r\n            if (isPinched(measurement)) {\r\n                return \" \" + i18n.FIT_INFO.when_pinched;\r\n            }\r\n            return \"\";\r\n        }\r\n\r\n        function getStretchedTxt(stretch_value) {\r\n            if (stretch_value > 0) {\r\n                if (stretch_value < 25) {\r\n                    return i18n.FIT_INFO.stretched_little + \"  \";\r\n                } else if (stretch_value < 75) {\r\n                    return i18n.FIT_INFO.stretched_somewhat + \"  \";\r\n                } else if (stretch_value < 95) {\r\n                    return i18n.FIT_INFO.stretched_much + \"  \";\r\n                } else {\r\n                    return i18n.FIT_INFO.stretched_max + \"  \";\r\n                }\r\n            }\r\n            return \"\";\r\n        }\r\n\r\n\t\tfunction updateSliderFlags() {\r\n\t\t\t// remove possible slider flags\r\n\t\t\t$(\".slider_container .sliderFlag\").remove();\r\n\t\t\t$.each(fitData, function (key, result) {\r\n\t\t\t\tvar thisLabel = sizeText($(uiOptions.sizeSelectionElement + ':not(\".cloned\")').find(\"[value='\" + key + \"']\").text());\r\n\t\t\t\tif (thisLabel) writeSliderFlag(result.totalFit, result.fitRangeLabel, thisLabel, key);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction checkAndCloneSizeSelect() {\r\n\t\t\t// clone actual selection element\r\n\t\t\tvar $clone = $(uiOptions.sizeSelectionElement + ':not(\".cloned\")').clone(false, false);\r\n\t\t\t$clone.addClass(\"cloned\");\r\n\t\t\t$clone.find(\"*\").addBack().each(function () {\r\n\t\t\t\t$(this).addClass(\"cloned\");\r\n\t\t\t\tif (this.id) this.id = \"clone_\" + this.id;\r\n\t\t\t\tif (this.name) this.name = \"clone_\" + this.name;\r\n\t\t\t});\r\n\r\n\t\t\t$(\".sizeme_detailed_size_selection_section\")\r\n\t\t\t\t.html(\"<h2>\" + i18n.COMMON.selected_size + \"</h2>\")\r\n\t\t\t\t.append($clone);\r\n\r\n\t\t\t// clone possible buttons too\r\n\t\t\tif (sizeme_options.buttonize === \"yes\") {\r\n\t\t\t\t$clone = $('.sm-buttonset:not(\".cloned\")').clone(true, true);\r\n\t\t\t\t$clone.addClass(\"cloned\");\r\n\t\t\t\t$clone.find(\"*\").addBack().each(function () {\r\n\t\t\t\t\t$(this).addClass(\"cloned\");\r\n\t\t\t\t\tif (this.id) this.id = \"clone_\" + this.id;\r\n\t\t\t\t\tif (this.name) this.name = \"clone_\" + this.name;\r\n\t\t\t\t});\r\n\r\n\t\t\t\t$(\".sizeme_detailed_size_selection_section\").append($clone);\r\n\t\t\t}\r\n\r\n\t\t\t// update flags\r\n\t\t\tif (sizeme_local_options.writeSliderFlags) updateSliderFlags();\r\n\r\n\t\t\t// bind invokers for cloned elements\r\n\t\t\t$(uiOptions.invokeElement + '.cloned').on(uiOptions.invokeEvent, function () {\r\n\t\t\t\tvar cloneVal = $('.sizeme-size-selector.cloned').val();\r\n\t\t\t\t// send value to original select\r\n\t\t\t\t$(uiOptions.sizeSelectionElement + ':not(\".cloned\")').val(cloneVal);\r\n\t\t\t\t// invoke event on invoker\t\t\t\t// invoke event on invoker\r\n\t\t\t\t$(uiOptions.invokeElement + ':not(\".cloned\")').trigger(uiOptions.invokeEvent);\r\n\t\t\t});\r\n\r\n\t\t\tvar original_val = $(uiOptions.sizeSelectionElement + ':not(\".cloned\")').val();\r\n\t\t\t// always make sure to relay original value to clone\r\n\t\t\t$('.sizeme-size-selector.cloned').val(original_val);\r\n\t\t}\r\n\r\n\r\n        function updateDetailedTable(matchMap, inputKey, missingMeasurements) {\r\n            var $table = $(\"#detailed_table\").find(\"tbody\"),\r\n                $row, $i, $tip, $txt;\r\n            $table.empty();\r\n\r\n            if (matchMap) {\r\n                // *** Detailed View ***\r\n\t\t\t\t// check if number of size elements has changed\r\n\t\t\t\tcheckAndCloneSizeSelect();\r\n\r\n                $table.data(\"matchMap\", matchMap);\r\n\r\n                $row = $(document.createElement(\"tr\")).addClass(\"header_row\");\r\n                $i = 0;\r\n                $.each(sizemeProduct.item.measurements[inputKey], function (measurement, value) {\r\n                    if (value > 0) {\r\n                        var $txt = '<span class=\"num\">' + (++$i) + '</span>' + i18n.MEASUREMENT[measurement];\r\n                        if (measurement_arrows[measurement]) {\r\n                            measurement_arrows[measurement].num = $i;\r\n                        }\r\n                        $row.append($(document.createElement(\"td\")).html($txt)\r\n                            .addClass(\"run_highlight cell_\" + measurement).data(\"measurement\", measurement));\r\n                    }\r\n                });\r\n                $table.append($row);\r\n\r\n                var $tip_txts = [];\r\n                var $tip_classes = [];\r\n\r\n                if (sizeme_local_options.writeOverlaps) {\r\n                    $row = $(document.createElement(\"tr\")).addClass(\"data_row\");\r\n                    // var $lifts = $(document.createElement(\"div\")).addClass(\"lifts\");\r\n                    $.each(sizemeProduct.item.measurements[inputKey], function (measurement, value) {\r\n                        var drawReason = 0;\r\n                        var matchItem = matchMap[measurement];\r\n                        if (matchItem && matchItem.componentFit > 0) {\r\n                            drawReason = 1;\r\n                        }\r\n                        if (value > 0) {\r\n                            drawReason = 2;\r\n                        }\r\n                        if (drawReason > 0) {\r\n                            var $txt = \"\";\r\n                            var $meas_top = 0;\r\n                            $tip_txts[measurement] = i18n.FIT_INFO.the_item + \" \" +\r\n                                i18n.MEASUREMENT[measurement].toLowerCase() + \" \" +\r\n                                i18n.FIT_INFO.the_measurement + \" \";\r\n\r\n                            if (matchItem) {\r\n                                $txt = (matchItem.overlap / 10).toFixed(1) + \" cm\";\r\n                                if (isPinched(measurement)) {\r\n                                    $txt = (matchItem.overlap / 20).toFixed(1) + \" cm\";\r\n                                }\r\n                                if ((matchItem.overlap <= 0) && (matchItem.componentFit >= 1000)) {\r\n                                    $txt = \"0.0 cm\";\r\n                                }\r\n\r\n                                switch (measurement) {\r\n                                    case \"sleeve\":\r\n                                        var $sleeve_txt = \"<div class='sleeve\" + (matchItem.overlap < 0 ? \" negative_overlap\" : \"\") + \"'>\";\r\n                                        var $sleeve_height = Math.round(29 + (75 * (matchItem.percentage / 0.3)));\t// zero-point + (wrist_to_finger * (overlap_percentage / normal_finger_ratio))\r\n                                        $sleeve_height = Math.max(11, $sleeve_height);\t// never under 11 (34 px)\r\n                                        $sleeve_height = Math.min(105, $sleeve_height);\t// never over overlap image height\r\n\r\n                                        $meas_top = Math.round((($sleeve_height - 29) / 2) + 29 - 9);\r\n                                        if (($sleeve_height - 29) < 14) { // no fit in middle if no room\r\n                                            $meas_top = $sleeve_height + 23;\r\n                                        }\r\n                                        if (matchItem.overlap < 0) {\r\n                                            $sleeve_txt += \"<div class='meas' style='top:14px;left:-7px;'>\" + $txt + \"</div>\";\t// negative overlap in different place\r\n                                            if (matchItem.componentFit >= 1000) {\r\n                                                $sleeve_height = 29;\r\n                                            }\r\n                                        } else {\r\n                                            $sleeve_txt += \"<div class='meas' style='top:\" + $meas_top + \"px;\";\r\n                                            if (matchItem.overlap >= 100) {\r\n                                                $sleeve_txt += \"left:-7px;\";\r\n                                            }\r\n                                            $sleeve_txt += \"'>\" + $txt + \"</div>\";\t// mid point?\r\n                                        }\r\n\r\n                                        $sleeve_txt += \"<div class='sleeve_overlap' style='height:\" + ($sleeve_height + 23) + \"px;'></div>\";\t// sleeve + image bottom clearance\r\n                                        $sleeve_txt += \"</div>\";\r\n                                        $tip_txts[measurement] = $sleeve_txt + $tip_txts[measurement];\r\n                                        break;\r\n                                    case \"front_height\":\r\n                                        var $front_height_txt = \"<div class='front_height\" + (matchItem.overlap < 0 ? \" negative_overlap\" : \"\") + \"'>\";\r\n                                        var $front_height_height = Math.round(25 + (matchItem.percentage * (9 / 0.05)));\t// zero-point + (overlap_percentage * (pant waistband height in px / pant waistband in %))\r\n                                        $front_height_height = Math.max(0, $front_height_height);\t// never under 0 (+23 = 34 px)\r\n                                        $front_height_height = Math.min(105, $front_height_height);\t// never over overlap image height (+23 px)\r\n\r\n                                        $meas_top = Math.round((($front_height_height - 25) / 2) + 25 - 9);\r\n                                        if (($front_height_height - 25) < 12) { // no fit in middle if no room\r\n                                            $meas_top = $front_height_height + 23;\r\n                                        }\r\n                                        if (matchItem.overlap < 0) {\r\n                                            $front_height_txt += \"<div class='meas' style='top:14px;left:-7px;'>\" + $txt + \"</div>\";\t// negative overlap in different place\r\n                                            if (matchItem.componentFit >= 1000) {\r\n                                                $front_height_height = 28;\r\n                                            }\r\n                                        } else {\r\n                                            $front_height_txt += \"<div class='meas' style='top:\" + $meas_top + \"px;\";\r\n                                            if (matchItem.overlap >= 100) {\r\n                                                $front_height_txt += \"left:-12px;\";\r\n                                            }\r\n                                            $front_height_txt += \"'>\" + $txt + \"</div>\";\t// mid point?\r\n                                        }\r\n\r\n                                        $front_height_txt += \"<div class='front_height_overlap' style='height:\" + ($front_height_height + 23) + \"px;'></div>\";\t// front_height + image (arrow) bottom clearance\r\n                                        $front_height_txt += \"</div>\";\r\n                                        $tip_txts[measurement] = $front_height_txt + $tip_txts[measurement];\r\n                                        break;\r\n                                }\t// end switch measurement\r\n\r\n                                if (matchItem.overlap <= 0) {\r\n                                    if (matchItem.componentFit >= 1000) {\r\n                                        $txt = \"0.0 cm\";\r\n                                        $tip_txts[measurement] += i18n.FIT_INFO.no_overlap + \"  \";\r\n                                        $tip_txts[measurement] += getStretchedTxt(matchItem.componentStretch);\r\n                                    } else {\r\n                                        $tip_txts[measurement] += i18n.FIT_INFO.is_smaller + \" \";\r\n                                        $tip_txts[measurement] += $txt.replace(\"-\", \"\");\r\n                                        $tip_txts[measurement] += isPinchedTxt(measurement) + \".  \";\r\n                                    }\r\n                                } else {\r\n                                    if (isPinched(measurement)) {\r\n                                        $tip_txts[measurement] = \"<div class='pinched'><div class='meas'>\" + $txt + \"</div></div>\" + $tip_txts[measurement];\r\n                                    }\r\n\r\n                                    $txt = \"+\" + $txt;\r\n                                    $tip_txts[measurement] += i18n.FIT_INFO.overlaps_you + \" <b>\" + $txt + \"</b>\" + isPinchedTxt(measurement);\r\n                                    if (measurement === \"sleeve\") {\r\n                                        $tip_txts[measurement] += \" \" + i18n.FIT_INFO.arm_sleeve_straight;\r\n                                    }\r\n                                    $tip_txts[measurement] += \".  \";\r\n                                }\r\n\r\n                                if (matchItem.componentFit > 0) {\r\n                                    var $fitVerdict = i18n.FIT_VERDICT[getFit(matchItem.componentFit, matchItem.importance).label];\r\n                                    if (isLongFit(measurement)) {\r\n                                        $fitVerdict = i18n.FIT_VERDICT_LONG[getFit(matchItem.componentFit, matchItem.importance).label];\r\n                                    }\r\n                                    $tip_txts[measurement] += i18n.FIT_INFO.sm_considers_fit + \" <b>\" + $fitVerdict.toLowerCase() + \"</b>.\";\r\n                                }\r\n\r\n                            } else if (value > 0) {\r\n                                $txt = (value / 10).toFixed(1) + \" cm\";\r\n                                $tip_txts[measurement] += i18n.COMMON.is + \" \" + $txt + \".  \";\r\n                                if (missingMeasurements) {\r\n                                    if (getMissingMeasurement(missingMeasurements, measurement) !== null) {\r\n                                        $tip_txts[measurement] += i18n.MESSAGE.add_this_measurement;\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            var $cell = $(document.createElement(\"td\"))\r\n                                .text($txt)\r\n                                .attr(\"id\", \"overlap_\" + measurement)\r\n                                .addClass(\"run_highlight cell_\" + measurement)\r\n                                .data(\"measurement\", measurement);\r\n                            $row.append(colorCell($cell, matchItem, measurement_arrows[measurement]));\r\n                            $tip_classes[measurement] = \"\";\r\n                            if (isPinched(measurement)) {\r\n                                $tip_classes[measurement] = \"isPinched\";\r\n                            }\r\n                            if (measurement === \"sleeve\") {\r\n                                $tip_classes[measurement] = \"sleeve\";\r\n                            }\r\n                            $tip = new Opentip($cell, $tip_txts[measurement], {className: $tip_classes[measurement]});\r\n                        }\r\n                    });\r\n                    $table.append($row);\r\n                }\r\n\r\n                $row = $(document.createElement(\"tr\")).addClass(\"data_row fit_label_row\");\r\n                $.each(sizemeProduct.item.measurements[inputKey], function (measurement, value) {\r\n                    var $cell;\r\n                    var matchItem = matchMap[measurement];\r\n                    if (matchItem) {\r\n                        if (matchItem.componentFit > 0) {\r\n                            $txt = i18n.FIT_VERDICT[getFit(matchItem.componentFit, matchItem.importance).label];\r\n\r\n                            if (isLongFit(measurement)) {\r\n                                $txt = i18n.FIT_VERDICT_LONG[getFit(matchItem.componentFit, matchItem.importance).label];\r\n                            }\r\n\r\n                            $cell = $(document.createElement(\"td\"))\r\n                                .html('<div>' + $txt + '</div>')\r\n                                .addClass(\"run_highlight\")\r\n                                .data(\"measurement\", measurement);\r\n\r\n                            $row.append(colorCell($cell, matchItem, measurement_arrows[measurement]));\r\n                        } else if (value > 0) {\r\n                            $txt = \"\";\r\n                            $cell = $(document.createElement(\"td\"))\r\n                                .html($txt)\r\n                                .addClass(\"info run_highlight cell_\" + measurement)\r\n                                .data(\"measurement\", measurement);\r\n                            $row.append($cell);\r\n                        }\r\n                    } else if (value > 0) {\r\n                        $txt = \"\";\r\n                        var $class = \"\",\r\n                            missing;\r\n                        if (missingMeasurements) {\r\n                            if ((missing = getMissingMeasurement(missingMeasurements, measurement)) !== null) {\r\n                                $txt = \"<a target='_blank' href='\" + linkToSelectedProfile + \"#\" + missing + \"'>\" + i18n.COMMON.add_to_profile + \"</a>\";\r\n                                $class = \" add\";\r\n                            }\r\n                        }\r\n                        $cell = $(document.createElement(\"td\"))\r\n                            .html($txt)\r\n                            .addClass(\"info run_highlight cell_\" + measurement + $class)\r\n                            .data(\"measurement\", measurement);\r\n                        $row.append($cell);\r\n                    }\r\n                    if ($cell) {\r\n                        $tip = new Opentip($cell, $tip_txts[measurement], {className: $tip_classes[measurement]});\r\n                    }\r\n                });\r\n                $table.append($row);\r\n\r\n            } else {\r\n                // *** Size Guide ***\r\n                $row = $(document.createElement(\"tr\")).addClass(\"header_row\");\r\n                $i = 0;\r\n                var $first = Object.keys(sizemeProduct.item.measurements)[0],\r\n                    $j, measurement;\r\n                $row.append($(document.createElement(\"td\")).html(i18n.COMMON.size).addClass(\"size_column\"));\r\n                for ($j = 0; $j < FIT_ORDER.length; $j++) {\r\n                    measurement = FIT_ORDER[$j];\r\n                    if (sizemeProduct.item.measurements[$first][measurement] > 0) {\r\n                        $txt = '<span class=\"num\">' + (++$i) + '</span>' + i18n.MEASUREMENT[measurement];\r\n                        if (measurement_arrows[measurement]) {\r\n                            measurement_arrows[measurement].num = $i;\r\n                        }\r\n                        $row.append($(document.createElement(\"td\")).html($txt).addClass(\"run_highlight cell_\" + measurement).data(\"measurement\", measurement));\r\n                    }\r\n                }\r\n                $table.append($row);\r\n\r\n\t\t\t\tvar sizeKeys = [];\r\n\r\n\t\t\t\t$(uiOptions.sizeSelectionElement + ':not(\".cloned\")').find(\"[value]\").each(function () {\r\n\t\t\t\t\tvar myVal = $(this).val();\r\n\t\t\t\t\tvar myText = $(this).text();\r\n\t\t\t\t\tif (myVal) {\r\n\t\t\t\t\t\tif (typeof sizemeProduct !== \"undefined\") {\r\n\t\t\t\t\t\t\tif (sizemeProduct.item.measurements[myVal]) {\r\n\t\t\t\t\t\t\t\tsizeKeys.push({key: myVal, sizeLabel: myText});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n                for ($i = 0; $i < sizeKeys.length; $i++) {\r\n                    var key = sizeKeys[$i].key, $cell;\r\n\r\n                    var $class = \"data_row\";\r\n                    if (key === inputKey) {\r\n                        $class += \" active\";\r\n                    }\r\n\r\n                    $row = $(document.createElement(\"tr\")).addClass($class);\r\n\r\n                    $row.append($(document.createElement(\"td\")).html(sizeText(sizeKeys[$i].sizeLabel)).addClass(\"size_column\"));\r\n                    for ($j = 0; $j < FIT_ORDER.length; $j++) {\r\n                        measurement = FIT_ORDER[$j];\r\n                        if (sizemeProduct.item.measurements[key][measurement] > 0) {\r\n                            $txt = (sizemeProduct.item.measurements[key][measurement] / 10).toFixed(1);\r\n                            $cell = $(document.createElement(\"td\")).text($txt + \" cm\").addClass(\"run_highlight cell_\" + measurement).data(\"measurement\", measurement);\r\n                            $row.append(colorCell($cell, \"\", measurement_arrows[measurement]));\r\n                        }\r\n                    }\r\n                    $table.append($row);\r\n                }\r\n            }\r\n\r\n            writeItemCanvas('sizeme_item_view', matchMap, \"\");\r\n\r\n        }\r\n\r\n        function updateDetailedSliderTip(thisSize, thisFit) {\r\n            // tip for overall slider in detailed\r\n            var $trigger = $(\"#sizeme_detailed_view_content\").find(\".slider_container\");\r\n            var $tip_txt = i18n.FIT_INFO.overall_fit_for_size + \" \" + sizeText(thisSize) + \"</b>\";\r\n            $tip_txt += \" \" + i18n.COMMON.is + \" <b>\" + i18n.FIT_VERDICT[getFit(thisFit, 1).label].toLowerCase() + \"</b>\";\r\n            var $tip = new Opentip($trigger, $tip_txt);\r\n        }\r\n\r\n        function updateSlider() {\r\n\t\t\tvar thisVal = $(uiOptions.sizeSelectionElement + ':not(\".cloned\")').val();\r\n\t\t\tvar $thisEl = $(uiOptions.sizeSelectionElement + ':not(\".cloned\")').find(\"[value='\" + thisVal + \"']\").eq(0);\r\n\t\t\tvar thisData = fitData[thisVal];\r\n\t\t\tvar thisSize = $thisEl.text();\r\n            if (typeof thisData !== \"undefined\") {\r\n\t\t\t\t$(document.body).removeClass(\"sizeme_inactive\");\r\n                var thisFit = thisData.totalFit;\r\n                var thisLabel = thisData.fitRangeLabel;\r\n                var matchMap = thisData.matchMap;\r\n                moveSlider(thisFit, true);\r\n                if (sizeme_local_options.fitAreaSlider) {\r\n                    moveAreaSlider(thisFit, matchMap, true);\r\n                }\r\n                if (sizeme_local_options.writeMessages) {\r\n                    goWriteMessages(matchMap, thisData.missingMeasurements, thisData.accuracy, thisFit);\r\n                }\r\n                updateDetailedSliderTip(thisSize, thisFit);\r\n                updateDetailedTable(matchMap, thisData.inputKey, thisData.missingMeasurements);\r\n            } else {\r\n\t\t\t\tcheckAndCloneSizeSelect();\r\n\t\t\t\t$(document.body).addClass(\"sizeme_inactive\");\r\n\t\t\t}\r\n        }\r\n\r\n        function getStandardHeader() {\r\n            // *** SizeMe Header injection\r\n            var headerHtml = \"<div id='sizeme_header' class='in_content'>\";\r\n            headerHtml += \"<div id='logo'></div>\";\r\n            headerHtml += \"<div class='sizeme_header_content'>\";\r\n            headerHtml += \"<div class='shopping_for'>\" + i18n.COMMON.fetching_profiles + \"</div>\";\r\n            headerHtml += \"<div class='top_right'>\";\r\n            headerHtml += \"<div id='log_info'><span id='logged_in'></span></div>\";\r\n            headerHtml += \"</div>\";\r\n            headerHtml += \"</div>\";\r\n            return headerHtml;\r\n        }\r\n\r\n        function getHeaderToggler() {\r\n            // *** SizeMe Header toggler\r\n            var headerHtml = \"<div id='sizeme_header_toggler' class='in_content'>\";\r\n            headerHtml += \"</div>\";\r\n            return headerHtml;\r\n        }\r\n\r\n        function getSplashDetailed() {\r\n            // *** SizeMe Splash #2 injection (detailed)\r\n            var headerHtml = \"<div id='sizeme_detailed_splash' class='splash'>\";\r\n            headerHtml += \"<p class='splash_text'>\";\r\n            headerHtml += i18n.SPLASH.detailed_text;\r\n            headerHtml += \"</p>\";\r\n            headerHtml += \"<ul class='splash_choices'>\";\r\n            headerHtml += \"<li class='sign_in'>\";\r\n            headerHtml += \"<a href='\" + SizeMe.contextAddress + \"/?mode=signup' target='_blank' class='a_button' id='sizeme_btn_sign_up' title='\" + i18n.SPLASH.btn_sign_up_label.replace(/'/g, \"&#39;\") + \"'>\";\r\n            headerHtml += i18n.SPLASH.btn_sign_up_title + \"</a>\";\r\n            headerHtml += \"</li>\";\r\n            headerHtml += \"<li class='log_in'><a href='#' class='a_button' id='sizeme_btn_login' title='\" + i18n.SPLASH.btn_log_in_label.replace(/'/g, \"&#39;\") + \"'>\" + i18n.SPLASH.btn_log_in_title + \"</a></li>\";\r\n            headerHtml += \"<li class='no_thanks'><td><a href='#' class='a_button' id='sizeme_btn_no_thanks' title='\" + i18n.SPLASH.btn_no_thanks_label.replace(/'/g, \"&#39;\") + \"'>\" + i18n.SPLASH.btn_no_thanks_title + \"</a></li>\";\r\n            headerHtml += \"</ul></div>\";\r\n            return headerHtml;\r\n        }\r\n\r\n        function getProductSplash() {\r\n            // *** SizeMe Splash in Product page\r\n            var splashHtml = \"<div id='sizeme_product_splash'>\";\r\n            splashHtml += \"<p>\" + i18n.SPLASH.product_page_splashes[0] + \" \";\r\n            splashHtml += \"<a href='\" + SizeMe.contextAddress + \"' target='_blank' id='sizeme_product_page_link' title='\" + i18n.SPLASH.product_page_splash_title + \"'></a>\";\r\n            splashHtml += \"<a href='#' id='sizeme_btn_no_thanks_product_splash' title='\" + i18n.COMMON.close_text + \"'></a>\";\r\n            splashHtml += \"</p></div>\";\r\n            return splashHtml;\r\n        }\r\n\r\n        function buttonize() {\r\n            selectToButtons(uiOptions.sizeSelectionElement);\r\n        }\r\n\r\n        function setProfileLink() {\r\n            if (selectedProfile === null) {\r\n                linkToSelectedProfile = SizeMe.contextAddress + \"/account/profiles.html\";\r\n            } else {\r\n                linkToSelectedProfile = SizeMe.contextAddress + \"/account/profiles/\" + selectedProfile + \"/profile.html\";\r\n            }\r\n        }\r\n\r\n        function doProfileChange(newValue, matchFn) {\r\n            selectedProfile = newValue;\r\n            setProfileLink();\r\n\r\n            if (selectedProfile === null) {\r\n                eraseCookie(\"sizeme_profileId\");\r\n                goWriteMessages();\r\n            } else {\r\n                $(\".profileSelect\").val(selectedProfile);\r\n                createCookie(\"sizeme_profileId\", selectedProfile, cookieLifetime);\r\n\r\n\t\t\t\t$(uiOptions.sizeSelectionElement).addClass(\"sizeme-size-selector\");\r\n\r\n                matchFn(selectedProfile);\r\n                SizeMe.trackEvent(\"activeProfileChanged\", \"Store: Active profile changed\");\r\n            }\r\n            $('#logged_in_link').attr(\"href\", linkToSelectedProfile);\r\n            // end of function  doProfileChange\r\n        }\r\n\r\n        var matchResponseHandler = function (responseMap) {\r\n            // bind invokers\r\n\t\t\t// for original elements\r\n            $(uiOptions.invokeElement + ':not(\".cloned\")').on(uiOptions.invokeEvent, function () {\r\n\t\t\t\tupdateSlider();\r\n\t\t\t\tSizeMe.trackEvent(\"sizeChanged\", \"Store: Product size changed\");\r\n            });\r\n\r\n            // remove existing recommendation\r\n            $(\".sm-buttonset\").find(\".sm-selectable\").removeClass('sm-recommended');\r\n\r\n\r\n\t\t\tvar smallestOffset = 9999;\r\n\t\t\t// reset fitData\r\n\t\t\tfitData = {};\r\n\r\n            $.each(responseMap, function (key, result) {\r\n\t\t\t\tif (typeof result == \"object\") {\r\n\t\t\t\t\tvar classKey = \".element_for_\" + key;\r\n\t\t\t\t\t$(classKey)\r\n\t\t\t\t\t\t.removeClass('sm-too_small sm-slim sm-regular sm-loose sm-very_loose sm-huge sm-too_big')\r\n\t\t\t\t\t\t.addClass('sm-' + result.fitRangeLabel);\r\n\r\n\t\t\t\t\t// Analyze fit for recommendations\r\n\t\t\t\t\tvar fitOffset = Math.abs(result.totalFit - OPTIMAL_FIT);\r\n\t\t\t\t\tif (fitOffset < smallestOffset) {\r\n\t\t\t\t\t\t// check if recommended option exists (is for sale)\r\n\t\t\t\t\t\tif ($(uiOptions.sizeSelectionElement + ':not(\".cloned\")').find(\"[value='\" + key + \"']\").length > 0) {\r\n\t\t\t\t\t\t\tsmallestOffset = fitOffset;\r\n\t\t\t\t\t\t\trecommendedId = key;\r\n\t\t\t\t\t\t\trecommendedLabel = result.fitRangeLabel;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// check if there are results in the first place\r\n\t\t\t\t\tif (result.accuracy < accuracyThreshold) {\r\n\t\t\t\t\t\t$('.slider_bar, .slider_area').hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$('.slider_bar, .slider_area').show();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// write data to fitData\r\n\t\t\t\t\tfitData[key] = {\r\n\t\t\t\t\t\ttotalFit: result.totalFit,\r\n\t\t\t\t\t\tfitRangeLabel: result.fitRangeLabel,\r\n\t\t\t\t\t\tmatchMap: result.matchMap,\r\n\t\t\t\t\t\tmissingMeasurements: result.missingMeasurements,\r\n\t\t\t\t\t\taccuracy: result.accuracy,\r\n\t\t\t\t\t\tinputKey: key\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n            });\r\n\r\n            // set selection to recommendation on first match\r\n\t\t\tvar thisData, thisSize;\r\n\r\n            if ((uiOptions.firstRecommendation) && (recommendedId)) {\r\n                // select recommended at original\r\n                $(uiOptions.sizeSelectionElement + ':not(\".cloned\")').val(recommendedId);\r\n                // select recommended at possible clone\r\n                $(\".sizeme-size-selector.cloned\").val(recommendedId);\r\n                // remove existing active\r\n                $(\".sm-buttonset\").find(\".sm-selectable\").removeClass('sm-state-active');\r\n                // add class\r\n                $(\".element_for_\" + recommendedId).addClass('sm-recommended sm-state-active');\r\n                updateSlider();\r\n                uiOptions.firstRecommendation = false;\r\n            } else {\r\n                updateSlider();\r\n            }\r\n            // end of function \tmatchResponseHandler\r\n        };\r\n\r\n        var profileListHandler = function (profileList, matchFn) {\r\n            var cookieProfile = readCookie(\"sizeme_profileId\");\r\n            var $i = 0;\r\n            var $new = \"<div id='sizeme_header_container'>\" + getStandardHeader() + \"</div>\";\r\n\r\n            // Prepend header to body\r\n            $(uiOptions.appendContentTo).append(getSliderHtml());\r\n            $(\".sizeme_slider .slider_text_below\").append($new);\r\n            $(\"#sizeme_header.in_content\").find(\"#logo\").on(\"click\", function () {\r\n                $(\"#sizeme_header.in_content\").toggleClass(\"opened\");\r\n            });\r\n\r\n            if (profileList.length > 0) {\r\n                selectedProfile = profileList[0].id;\r\n                $.each(profileList, function () {\r\n                    if (this.id === cookieProfile) {\r\n                        selectedProfile = this.id;\r\n                        return false;\r\n                    }\r\n                });\r\n\r\n                writeDetailedWindow(false);\r\n                moveSlider(OPTIMAL_FIT, false);\r\n\r\n                $(\".shopping_for\").empty().html(\"<span class='shopping_for_text'>\" + i18n.COMMON.shopping_for + \": </span>\")\r\n                    .append(function () {\r\n                        var select = document.createElement(\"select\");\r\n                        select.className = \"profileSelect\";\r\n                        select.id = \"id_profileSelect_\" + (++$i);\r\n                        return select;\r\n                    });\r\n                $.each(profileList, function () {\r\n                    $(\"<option>\").appendTo(\".profileSelect\")\r\n                        .attr(\"value\", this.id)\r\n                        .text(this.profileName);\r\n                });\r\n                $('.profileSelect')\r\n                    .val(selectedProfile)\r\n                    .change(function () {\r\n                        doProfileChange(this.value, matchFn);\r\n                    });\r\n            } else {\r\n                selectedProfile = null;\r\n                setProfileLink();\r\n                writeDetailedWindow(false);\r\n                updateDetailedTable();\r\n                $('.slider_bar, .slider_area').hide();\r\n                $(\".shopping_for\").empty();\r\n                $(\".sizeme_header_content .shopping_for\")\r\n                    .html(\"<span class='shopping_for_text no-profile'>\" + i18n.MESSAGE.no_profiles + \"</span>\");\r\n                $(\".sizeme_detailed_section .shopping_for\")\r\n                    .append(\r\n                        $(\"<span>\").addClass(\"shopping_for_text no-profile\")\r\n                            .html(i18n.MESSAGE.no_profiles + \" \" + i18n.COMMON.go_to +\r\n                                \"<a id='logged_in_link' href='\" + linkToSelectedProfile + \"' target='_blank'>\" + i18n.COMMON.my_profiles + \"</a> \" + i18n.COMMON.and_create_one)\r\n                    );\r\n            }\r\n\r\n            $('#logged_in').html(\"<a id='logged_in_link' href='#' target='_blank'>\" + i18n.COMMON.my_profiles + \"</a>\");\r\n\r\n            // Yell change\r\n            doProfileChange(selectedProfile, matchFn);\r\n        };\r\n\r\n        var login = function (logoutFn) {\r\n            eraseCookie(\"sizeme_no_thanks\");\r\n            eraseCookie(\"sizeme_no_product_splash\");\r\n\r\n            // remove existing (if exists)\r\n            $(\"#sizeme_header\").remove();\r\n            $(\"#popup_opener\").remove();\r\n            $(\"#sizeme_product_splash\").remove();\r\n            $(\"#sizeme_detailed_view_content\").dialog(\"destroy\").remove();\r\n\r\n            $(\"#logout\").click(logoutFn);\r\n        };\r\n\r\n        var logout = function (loginFn) {\r\n            loadArrows(true);\r\n\r\n            // Size Guide for non-loving users\r\n            writeDetailedWindow(true);\r\n            updateDetailedTable();\r\n\r\n            // Makia live temporary exception\r\n            // Show size guide text only if there actually is a size guide (otherwise hidden with css)\r\n            $(\".sizeme p\").show();\r\n\r\n            // bind invokers\r\n            $(uiOptions.invokeElement + ':not(\".cloned\")').on(uiOptions.invokeEvent, function () {\r\n                var sizeVal = $(uiOptions.sizeSelectionElement + ':not(\".cloned\")').val();\r\n                updateDetailedTable(\"\", sizeVal);\r\n            });\r\n\r\n            if (sizeme_options.service_status === \"on\") {\r\n                var splashContent;\r\n                // Add splash content in detailed\r\n                splashContent = getSplashDetailed();\r\n                if (noThanks()) {\r\n                    splashContent = $(splashContent).hide();\r\n                }\r\n                $(\"#sizeme_detailed_view_content\").append(splashContent);\r\n\r\n                // login button\r\n                $(\"#sizeme_btn_login\").click(function () {\r\n                    SizeMe.trackEvent(\"clickLogin\", \"Store: Login clicked\");\r\n                    tokenHelper.clearAuthToken();\r\n                    SizeMe.loginFrame(function () {\r\n                        loginFn();\r\n                    });\r\n                    return false;\r\n                });\r\n\r\n                $(\"#sizeme_btn_sign_up\").click(function () {\r\n                    SizeMe.trackEvent(\"clickSignUp\", \"Store: Sign up clicked\");\r\n                    tokenHelper.clearAuthToken();\r\n                    return true;\r\n                });\r\n\r\n                // no thanks button\r\n                $(\"#sizeme_btn_no_thanks\").on(\"click\", function () {\r\n                    SizeMe.trackEvent(\"noThanks\", \"Store: SizeMe, no thanks\");\r\n                    createCookie(\"sizeme_no_thanks\", \"true\", cookieLifetime);\r\n                    $(\".splash\").hide();\r\n                    $(\"#sizeme_btn_no_thanks_product_splash\").trigger(\"click\");\t\t// also close possible product splasher\r\n                    return false;\r\n                });\r\n\r\n                // Product page splash\r\n                if (!noProductSplash()) {\r\n                    $(uiOptions.appendSplashTo).append(getProductSplash());\r\n                    $(\"#sizeme_btn_no_thanks_product_splash\").on(\"click\", function () {\r\n                        SizeMe.trackEvent(\"noProductSplash\", \"Store: Product splash closed\");\r\n                        createCookie(\"sizeme_no_product_splash\", \"true\", cookieLifetime);\r\n                        $(\"#sizeme_product_splash\").slideUp();\r\n                        return false;\r\n                    });\r\n\r\n                    $(\"#sizeme_product_page_link\").on(\"click\", function () {\r\n                        SizeMe.trackEvent(\"clickProductSplash\", \"Store: Product splash clicked\");\r\n                    });\r\n\r\n                }\r\n            }\r\n\r\n        };\r\n\r\n        var init = function () {\r\n            // language sniffer\r\n            var sizemeLang;\r\n            if (typeof uiOptions.lang === 'undefined') {\r\n                sizemeLang = $('html').attr('lang');\r\n            } else {\r\n                sizemeLang = uiOptions.lang;\r\n            }\r\n            i18n = SizeMe.I18N.get(sizemeLang);\r\n\t\t\t\r\n            // fallback for legacy size selection pointer\r\n            if (typeof uiOptions.sizeSelectionContainer !== 'undefined') {\r\n                uiOptions.sizeSelectionElement = uiOptions.sizeSelectionContainer + \" select\";\r\n            }\t\t\t\r\n\r\n            if (sizemeProduct) {\r\n\t\t\t\tloadArrows(false); // if there is a product, we need arrows\r\n\r\n\t\t\t\tif (!$(uiOptions.sizeSelectionElement).length) {\r\n\t\t\t\t\tthrow Error(\"No selection elements found with id \" + uiOptions.sizeSelectionElement);\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\r\n            // buttonize\r\n            if (typeof sizeme_options !== 'undefined' && sizeme_options.buttonize === \"yes\") {\r\n                buttonize();\r\n            }\r\n\r\n            if (uiOptions.addToCartEvent) {\r\n\t\t\t\tif (sizemeProduct) {\t// we have product information in some form\r\n\t\t\t\t\t$(uiOptions.addToCartElement).on(uiOptions.addToCartEvent, function () {\r\n\t\t\t\t\t\tif (tokenHelper.isLoggedIn()) {\r\n\t\t\t\t\t\t\tSizeMe.trackEvent(\"addToCartSM\", \"Store: Product added to cart by SizeMe user\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tSizeMe.trackEvent(\"addToCart\", \"Store: Product added to cart\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\t\t\t\t// not a SM-compatible product\r\n\t\t\t\t\t$(uiOptions.addToCartElement).on(uiOptions.addToCartEvent, function () {\r\n\t\t\t\t\t\tif (tokenHelper.isLoggedIn()) {\r\n\t\t\t\t\t\t\tSizeMe.trackEvent(\"addNonSMToCartSM\", \"Store: Non-SizeMe product added to cart by SizeMe user\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tSizeMe.trackEvent(\"addNonSMToCart\", \"Store: Non-SizeMe product added to cart\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n            }\r\n        };\r\n\r\n        init();\r\n\r\n        return {\r\n            noThanks: noThanks,\r\n            matchResponseHandler: matchResponseHandler,\r\n            matchErrorHandler: function () {\r\n                // this is called when the match function returns an error.  This is most likely due to a wrong or unadded itemType and only visible when the user is logged in.\r\n                // if the itemType is\r\n                $(\".sizeme_slider\").hide();\r\n                console.error(\"SizeMe: error in match function.  Please contact your local SizeMe dealer.\");\r\n                // end of function \tmatchErrorHandler\r\n            },\r\n            profileListHandler: profileListHandler,\r\n            login: login,\r\n            logout: logout\r\n        };\r\n    };\r\n\r\n    SizeMe.UI.options = {};\r\n\r\n})(window);\n// SizeMe UI JS v1.0\r\n// based on SizeMe Item Types 2015-10-01\r\n// (c) SizeMe Inc.\r\n// www.sizeme.com\r\n// License undecided\r\n/* jshint browser:true, jquery:true */\r\n/* globals SizeMe: false, sizeme_options: false, sizeme_product: false */\r\n(function (window, undefined) {\r\n    \"use strict\";\r\n    SizeMe.sizemeInit = function ($) {\r\n\r\n        var sizeme;\r\n\r\n        var TokenHelper = function () {\r\n\r\n            var dataStorage = (function () {\r\n                var type = \"sessionStorage\";\r\n\r\n                function DataStorage() {\r\n                    try {\r\n                        var _tstorage = window[type];\r\n                        var x = '__storage_test__';\r\n                        _tstorage.setItem(x, x);\r\n                        _tstorage.removeItem(x);\r\n                        this.storage = window[type];\r\n                    } catch (e) {\r\n                        this.storage = null;\r\n                    }\r\n                }\r\n\r\n                DataStorage.prototype.storage = null;\r\n                DataStorage.prototype.withStorage = function (callback) {\r\n                    if (this.storage === null) {\r\n                        return;\r\n                    }\r\n\r\n                    return callback(this.storage);\r\n                };\r\n\r\n                return new DataStorage();\r\n            })();\r\n\r\n            this.getAuthToken = function () {\r\n                var deferred = $.Deferred();\r\n\r\n                dataStorage.withStorage(function (storage) {\r\n                    var storedTokenObj = storage.getItem('authToken'),\r\n                        storedToken;\r\n                    if (storedTokenObj !== null) {\r\n                        storedToken = JSON.parse(storedTokenObj);\r\n                        if (storedToken.expires !== undefined) {\r\n                            storedToken.expires = Date.parse(storedToken.expires);\r\n                            // Has token expired?\r\n                            if (storedToken.expires > new Date().getTime()) {\r\n                                if (storedToken.token !== undefined) {\r\n                                    deferred.resolve(storedToken.token);\r\n                                } else {\r\n                                    deferred.reject(null);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n\r\n                if (deferred.state() === \"pending\") {\r\n                    SizeMe.getAuthToken(function (authTokenObj) {\r\n                        if (authTokenObj === null || authTokenObj.token === null) {\r\n                            deferred.reject(null);\r\n                        } else {\r\n                            dataStorage.withStorage(function (storage) {\r\n                                storage.setItem('authToken', JSON.stringify(authTokenObj));\r\n                            });\r\n                            deferred.resolve(authTokenObj.token);\r\n                        }\r\n                    });\r\n                }\r\n\r\n                return deferred.promise();\r\n            };\r\n\r\n            this.clearAuthToken = function () {\r\n                dataStorage.withStorage(function (storage) {\r\n                    storage.removeItem('authToken');\r\n                });\r\n            };\r\n\r\n            this.isLoggedIn = function () {\r\n                return !!sizeme;\r\n            };\r\n        };\r\n        var tokenHelper = new TokenHelper();\r\n\r\n        var initSizeme = function () {\r\n            return tokenHelper.getAuthToken().then(function (token) {\r\n                sizeme = new SizeMe(token);\r\n            });\r\n        };\r\n\r\n        var initProduct = function () {\r\n            var productPromise = $.Deferred();\r\n\t\t\tif (typeof sizeme_product !== 'undefined') {\r\n\t\t\t\tif (sizeme_product.SKU) {\r\n\t\t\t\t\tSizeMe.getProductInfo(sizeme_product.SKU, function (dbItem) {\r\n\t\t\t\t\t\tvar productItem = $.extend({}, dbItem, { measurements: {} });\r\n\t\t\t\t\t\t$.each(dbItem.measurements, function (sku, values) {\r\n\t\t\t\t\t\t\tif (sizeme_product.item[sku]) {\r\n\t\t\t\t\t\t\t\tproductItem.measurements[sizeme_product.item[sku]] = values;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tvar theProduct = $.extend({}, sizeme_product, { item: productItem });\r\n\t\t\t\t\t\tproductPromise.resolve(theProduct);\r\n\t\t\t\t\t}, function (xhr, status) {\r\n\t\t\t\t\t\tproductPromise.reject(status);\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tproductPromise.resolve(sizeme_product);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tproductPromise.reject(null);\r\n\t\t\t}\r\n            return productPromise;\r\n        };\r\n\r\n        var setup = function (product) {\r\n            var sizemeUI;\r\n\r\n            var checkMaxMeasurement = function () {\r\n                var maxVal = 0;\r\n                $.each(product.item.measurements, function (_, measurements) {\r\n                    $.each(measurements, function (_, value) {\r\n                        maxVal = Math.max(value, maxVal);\r\n                    });\r\n                });\r\n                return maxVal !== 0;\r\n            };\r\n\r\n            var doMatch = function (selectedProfile) {\r\n                var item;\r\n                var matchHandler;\r\n                if (sizeme_product.SKU) {\r\n                    item = sizeme_product.SKU;\r\n                    matchHandler = function (responseMap) {\r\n                        var convertedResponseMap = {};\r\n                        $.each(responseMap, function (sku, result) {\r\n                            if (sizeme_product.item[sku]) {\r\n                                convertedResponseMap[sizeme_product.item[sku]] = result;\r\n                            }\r\n                        });\r\n                        sizemeUI.matchResponseHandler(convertedResponseMap);\r\n                    };\r\n\r\n                } else {\r\n                    item = $.extend({}, product.item);\r\n                    matchHandler = sizemeUI.matchResponseHandler;\r\n                    var itemType = item.itemType;\r\n                    if (itemType.indexOf('.') < 0) {\r\n                        item.itemType = itemType.split('').join('.');\r\n                    }\r\n                }\r\n                sizeme.match(new SizeMe.FitRequest(selectedProfile, item),\r\n                    matchHandler,\r\n                    sizemeUI.matchErrorHandler\r\n                );\r\n            };\r\n\r\n            var loggedInCb = function () {\r\n                sizemeUI.login(loggedOutCb);\r\n\r\n                // *** SizeMe Magic\r\n                if (tokenHelper.isLoggedIn()) {\r\n                    sizeme.fetchProfilesForAccount(function (profileList) {\r\n                        sizemeUI.profileListHandler(profileList, doMatch);\r\n                    });\r\n                }\r\n                // end of function \tloggedInCb\r\n            };\r\n\r\n            var loggedOutCb = function () {\r\n                sizeme = null;\r\n                sizemeUI.logout(function () {\r\n                    initSizeme().then(loggedInCb);\r\n                });\r\n            };\r\n\r\n            var systemsGo = !!sizeme_options &&\r\n                sizeme_options.service_status !== \"off\" &&\r\n                product.item.itemType !== 0 &&\t\t\t\t\t\t// empty string equals zero\r\n                checkMaxMeasurement() &&\t\t\t\t\t\t\t// at least one measurement is not zero\r\n                (sizemeUI = SizeMe.UI($, product, tokenHelper));\t// also inits SizeMe.UI\r\n\r\n            if (systemsGo) {\r\n                if (sizemeUI.noThanks()) {\r\n                    SizeMe.trackEvent(\"productPageNoSM\", \"Store: Product page load, SizeMe refused\");\r\n                    loggedOutCb();\r\n                } else if (tokenHelper.isLoggedIn()) {\r\n                    SizeMe.trackEvent(\"productPageLoggedIn\", \"Store: Product page load, logged in\");\r\n                    loggedInCb();\r\n                } else {\r\n                    SizeMe.trackEvent(\"productPageLoggedOut\", \"Store: Product page load, logged out\");\r\n                    loggedOutCb();\r\n                }\r\n            }\r\n            // *** End\r\n        };\r\n\r\n        var setupNoProduct = function (status) {\r\n            //console.log(\"Product not found, status: \" + status);\r\n\t\t\tvar sizemeUI = SizeMe.UI($, null, tokenHelper);\r\n\t\t\t\r\n\t\t\tif (typeof sizeme_product !== 'undefined') {\r\n\t\t\t\t// yell events\r\n\t\t\t\tif (sizemeUI.noThanks()) {\r\n\t\t\t\t\tSizeMe.trackEvent(\"productPageNonSMNoSM\", \"Store: Product page load, SizeMe refused\");\r\n\t\t\t\t} else if (tokenHelper.isLoggedIn()) {\r\n\t\t\t\t\tSizeMe.trackEvent(\"productPageNonSMLoggedIn\", \"Store: Product page load, logged in\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tSizeMe.trackEvent(\"productPageNonSMLoggedOut\", \"Store: Product page load, logged out\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n        };\r\n\r\n        $(function () {\r\n            var sizemeDef = $.Deferred();\r\n            initSizeme().always(function () {\r\n                sizemeDef.resolve();\r\n            });\r\n\r\n            $.when(initProduct(), sizemeDef)\r\n                .done(setup)\r\n                .fail(setupNoProduct);\r\n        });\r\n\r\n    };\r\n\r\n})(window);\r\n"],"sourceRoot":"/source/"}